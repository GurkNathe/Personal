{"ast":null,"code":"import _slicedToArray from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _defineProperty from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as React from 'react';\nimport create from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\nvar context = /*@__PURE__*/React.createContext(null);\nfunction KeyboardControls(_ref) {\n  var map = _ref.map,\n    children = _ref.children,\n    onChange = _ref.onChange,\n    domElement = _ref.domElement;\n  var key = map.map(function (item) {\n    return item.name + item.keys;\n  }).join('-');\n  var useControls = React.useMemo(function () {\n    return create(subscribeWithSelector(function () {\n      return map.reduce(function (prev, cur) {\n        return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, cur.name, false));\n      }, {});\n    }));\n  }, [key]);\n  var api = React.useMemo(function () {\n    return [useControls.subscribe, useControls.getState, useControls];\n  }, [key]);\n  var set = useControls.setState;\n  React.useEffect(function () {\n    var config = map.map(function (_ref2) {\n      var name = _ref2.name,\n        keys = _ref2.keys,\n        up = _ref2.up;\n      return {\n        keys: keys,\n        up: up,\n        fn: function fn(value) {\n          // Set zustand state\n          set(_defineProperty({}, name, value)); // Inform callback\n\n          if (onChange) onChange(name, value, api[1]());\n        }\n      };\n    });\n    var keyMap = config.reduce(function (out, _ref3) {\n      var keys = _ref3.keys,\n        fn = _ref3.fn,\n        _ref3$up = _ref3.up,\n        up = _ref3$up === void 0 ? true : _ref3$up;\n      keys.forEach(function (key) {\n        return out[key] = {\n          fn: fn,\n          pressed: false,\n          up: up\n        };\n      });\n      return out;\n    }, {});\n    var downHandler = function downHandler(_ref4) {\n      var key = _ref4.key,\n        code = _ref4.code;\n      var obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      var fn = obj.fn,\n        pressed = obj.pressed,\n        up = obj.up;\n      obj.pressed = true;\n      if (up || !pressed) fn(true);\n    };\n    var upHandler = function upHandler(_ref5) {\n      var key = _ref5.key,\n        code = _ref5.code;\n      var obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      var fn = obj.fn,\n        up = obj.up;\n      obj.pressed = false;\n      if (up) fn(false);\n    };\n    var source = domElement || window;\n    source.addEventListener('keydown', downHandler, {\n      passive: true\n    });\n    source.addEventListener('keyup', upHandler, {\n      passive: true\n    });\n    return function () {\n      source.removeEventListener('keydown', downHandler);\n      source.removeEventListener('keyup', upHandler);\n    };\n  }, [domElement, key]);\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api,\n    children: children\n  });\n}\nfunction useKeyboardControls(sel) {\n  var _React$useContext = React.useContext(context),\n    _React$useContext2 = _slicedToArray(_React$useContext, 3),\n    sub = _React$useContext2[0],\n    get = _React$useContext2[1],\n    store = _React$useContext2[2];\n  if (sel) return store(sel);else return [sub, get];\n}\nexport { KeyboardControls, useKeyboardControls };","map":{"version":3,"names":["React","create","subscribeWithSelector","context","createContext","KeyboardControls","_ref","map","children","onChange","domElement","key","item","name","keys","join","useControls","useMemo","reduce","prev","cur","_objectSpread","_defineProperty","api","subscribe","getState","set","setState","useEffect","config","_ref2","up","fn","value","keyMap","out","_ref3","_ref3$up","forEach","pressed","downHandler","_ref4","code","obj","upHandler","_ref5","source","window","addEventListener","passive","removeEventListener","createElement","Provider","useKeyboardControls","sel","_React$useContext","useContext","_React$useContext2","_slicedToArray","sub","get","store"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@react-three+drei@9.72.1_@react-three+fiber@8.13.0_@types+three@0.150.2_react-dom@18.2.0_react@18.2.0_three@0.151.3/node_modules/@react-three/drei/web/KeyboardControls.js"],"sourcesContent":["import * as React from 'react';\nimport create from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\n\nconst context = /*@__PURE__*/React.createContext(null);\nfunction KeyboardControls({\n  map,\n  children,\n  onChange,\n  domElement\n}) {\n  const key = map.map(item => item.name + item.keys).join('-');\n  const useControls = React.useMemo(() => {\n    return create(subscribeWithSelector(() => map.reduce((prev, cur) => ({ ...prev,\n      [cur.name]: false\n    }), {})));\n  }, [key]);\n  const api = React.useMemo(() => [useControls.subscribe, useControls.getState, useControls], [key]);\n  const set = useControls.setState;\n  React.useEffect(() => {\n    const config = map.map(({\n      name,\n      keys,\n      up\n    }) => ({\n      keys,\n      up,\n      fn: value => {\n        // Set zustand state\n        set({\n          [name]: value\n        }); // Inform callback\n\n        if (onChange) onChange(name, value, api[1]());\n      }\n    }));\n    const keyMap = config.reduce((out, {\n      keys,\n      fn,\n      up = true\n    }) => {\n      keys.forEach(key => out[key] = {\n        fn,\n        pressed: false,\n        up\n      });\n      return out;\n    }, {});\n\n    const downHandler = ({\n      key,\n      code\n    }) => {\n      const obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      const {\n        fn,\n        pressed,\n        up\n      } = obj;\n      obj.pressed = true;\n      if (up || !pressed) fn(true);\n    };\n\n    const upHandler = ({\n      key,\n      code\n    }) => {\n      const obj = keyMap[key] || keyMap[code];\n      if (!obj) return;\n      const {\n        fn,\n        up\n      } = obj;\n      obj.pressed = false;\n      if (up) fn(false);\n    };\n\n    const source = domElement || window;\n    source.addEventListener('keydown', downHandler, {\n      passive: true\n    });\n    source.addEventListener('keyup', upHandler, {\n      passive: true\n    });\n    return () => {\n      source.removeEventListener('keydown', downHandler);\n      source.removeEventListener('keyup', upHandler);\n    };\n  }, [domElement, key]);\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api,\n    children: children\n  });\n}\nfunction useKeyboardControls(sel) {\n  const [sub, get, store] = React.useContext(context);\n  if (sel) return store(sel);else return [sub, get];\n}\n\nexport { KeyboardControls, useKeyboardControls };\n"],"mappings":";;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,MAAM,MAAM,SAAS;AAC5B,SAASC,qBAAqB,QAAQ,oBAAoB;AAE1D,IAAMC,OAAO,GAAG,aAAaH,KAAK,CAACI,aAAa,CAAC,IAAI,CAAC;AACtD,SAASC,gBAAgBA,CAAAC,IAAA,EAKtB;EAAA,IAJDC,GAAG,GAAAD,IAAA,CAAHC,GAAG;IACHC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;IACRC,QAAQ,GAAAH,IAAA,CAARG,QAAQ;IACRC,UAAU,GAAAJ,IAAA,CAAVI,UAAU;EAEV,IAAMC,GAAG,GAAGJ,GAAG,CAACA,GAAG,CAAC,UAAAK,IAAI;IAAA,OAAIA,IAAI,CAACC,IAAI,GAAGD,IAAI,CAACE,IAAI;EAAA,EAAC,CAACC,IAAI,CAAC,GAAG,CAAC;EAC5D,IAAMC,WAAW,GAAGhB,KAAK,CAACiB,OAAO,CAAC,YAAM;IACtC,OAAOhB,MAAM,CAACC,qBAAqB,CAAC;MAAA,OAAMK,GAAG,CAACW,MAAM,CAAC,UAACC,IAAI,EAAEC,GAAG;QAAA,OAAAC,aAAA,CAAAA,aAAA,KAAWF,IAAI,OAAAG,eAAA,KAC3EF,GAAG,CAACP,IAAI,EAAG,KAAK;MAAA,CACjB,EAAE,CAAC,CAAC,CAAC;IAAA,EAAC,CAAC;EACX,CAAC,EAAE,CAACF,GAAG,CAAC,CAAC;EACT,IAAMY,GAAG,GAAGvB,KAAK,CAACiB,OAAO,CAAC;IAAA,OAAM,CAACD,WAAW,CAACQ,SAAS,EAAER,WAAW,CAACS,QAAQ,EAAET,WAAW,CAAC;EAAA,GAAE,CAACL,GAAG,CAAC,CAAC;EAClG,IAAMe,GAAG,GAAGV,WAAW,CAACW,QAAQ;EAChC3B,KAAK,CAAC4B,SAAS,CAAC,YAAM;IACpB,IAAMC,MAAM,GAAGtB,GAAG,CAACA,GAAG,CAAC,UAAAuB,KAAA;MAAA,IACrBjB,IAAI,GAAAiB,KAAA,CAAJjB,IAAI;QACJC,IAAI,GAAAgB,KAAA,CAAJhB,IAAI;QACJiB,EAAE,GAAAD,KAAA,CAAFC,EAAE;MAAA,OACG;QACLjB,IAAI,EAAJA,IAAI;QACJiB,EAAE,EAAFA,EAAE;QACFC,EAAE,EAAE,SAAAA,GAAAC,KAAK,EAAI;UACX;UACAP,GAAG,CAAAJ,eAAA,KACAT,IAAI,EAAGoB,KAAK,CACd,CAAC,CAAC,CAAC;;UAEJ,IAAIxB,QAAQ,EAAEA,QAAQ,CAACI,IAAI,EAAEoB,KAAK,EAAEV,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/C;MACF,CAAC;IAAA,CAAC,CAAC;IACH,IAAMW,MAAM,GAAGL,MAAM,CAACX,MAAM,CAAC,UAACiB,GAAG,EAAAC,KAAA,EAI3B;MAAA,IAHJtB,IAAI,GAAAsB,KAAA,CAAJtB,IAAI;QACJkB,EAAE,GAAAI,KAAA,CAAFJ,EAAE;QAAAK,QAAA,GAAAD,KAAA,CACFL,EAAE;QAAFA,EAAE,GAAAM,QAAA,cAAG,IAAI,GAAAA,QAAA;MAETvB,IAAI,CAACwB,OAAO,CAAC,UAAA3B,GAAG;QAAA,OAAIwB,GAAG,CAACxB,GAAG,CAAC,GAAG;UAC7BqB,EAAE,EAAFA,EAAE;UACFO,OAAO,EAAE,KAAK;UACdR,EAAE,EAAFA;QACF,CAAC;MAAA,EAAC;MACF,OAAOI,GAAG;IACZ,CAAC,EAAE,CAAC,CAAC,CAAC;IAEN,IAAMK,WAAW,GAAG,SAAdA,WAAWA,CAAAC,KAAA,EAGX;MAAA,IAFJ9B,GAAG,GAAA8B,KAAA,CAAH9B,GAAG;QACH+B,IAAI,GAAAD,KAAA,CAAJC,IAAI;MAEJ,IAAMC,GAAG,GAAGT,MAAM,CAACvB,GAAG,CAAC,IAAIuB,MAAM,CAACQ,IAAI,CAAC;MACvC,IAAI,CAACC,GAAG,EAAE;MACV,IACEX,EAAE,GAGAW,GAAG,CAHLX,EAAE;QACFO,OAAO,GAELI,GAAG,CAFLJ,OAAO;QACPR,EAAE,GACAY,GAAG,CADLZ,EAAE;MAEJY,GAAG,CAACJ,OAAO,GAAG,IAAI;MAClB,IAAIR,EAAE,IAAI,CAACQ,OAAO,EAAEP,EAAE,CAAC,IAAI,CAAC;IAC9B,CAAC;IAED,IAAMY,SAAS,GAAG,SAAZA,SAASA,CAAAC,KAAA,EAGT;MAAA,IAFJlC,GAAG,GAAAkC,KAAA,CAAHlC,GAAG;QACH+B,IAAI,GAAAG,KAAA,CAAJH,IAAI;MAEJ,IAAMC,GAAG,GAAGT,MAAM,CAACvB,GAAG,CAAC,IAAIuB,MAAM,CAACQ,IAAI,CAAC;MACvC,IAAI,CAACC,GAAG,EAAE;MACV,IACEX,EAAE,GAEAW,GAAG,CAFLX,EAAE;QACFD,EAAE,GACAY,GAAG,CADLZ,EAAE;MAEJY,GAAG,CAACJ,OAAO,GAAG,KAAK;MACnB,IAAIR,EAAE,EAAEC,EAAE,CAAC,KAAK,CAAC;IACnB,CAAC;IAED,IAAMc,MAAM,GAAGpC,UAAU,IAAIqC,MAAM;IACnCD,MAAM,CAACE,gBAAgB,CAAC,SAAS,EAAER,WAAW,EAAE;MAC9CS,OAAO,EAAE;IACX,CAAC,CAAC;IACFH,MAAM,CAACE,gBAAgB,CAAC,OAAO,EAAEJ,SAAS,EAAE;MAC1CK,OAAO,EAAE;IACX,CAAC,CAAC;IACF,OAAO,YAAM;MACXH,MAAM,CAACI,mBAAmB,CAAC,SAAS,EAAEV,WAAW,CAAC;MAClDM,MAAM,CAACI,mBAAmB,CAAC,OAAO,EAAEN,SAAS,CAAC;IAChD,CAAC;EACH,CAAC,EAAE,CAAClC,UAAU,EAAEC,GAAG,CAAC,CAAC;EACrB,OAAO,aAAaX,KAAK,CAACmD,aAAa,CAAChD,OAAO,CAACiD,QAAQ,EAAE;IACxDnB,KAAK,EAAEV,GAAG;IACVf,QAAQ,EAAEA;EACZ,CAAC,CAAC;AACJ;AACA,SAAS6C,mBAAmBA,CAACC,GAAG,EAAE;EAChC,IAAAC,iBAAA,GAA0BvD,KAAK,CAACwD,UAAU,CAACrD,OAAO,CAAC;IAAAsD,kBAAA,GAAAC,cAAA,CAAAH,iBAAA;IAA5CI,GAAG,GAAAF,kBAAA;IAAEG,GAAG,GAAAH,kBAAA;IAAEI,KAAK,GAAAJ,kBAAA;EACtB,IAAIH,GAAG,EAAE,OAAOO,KAAK,CAACP,GAAG,CAAC,CAAC,KAAK,OAAO,CAACK,GAAG,EAAEC,GAAG,CAAC;AACnD;AAEA,SAASvD,gBAAgB,EAAEgD,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}