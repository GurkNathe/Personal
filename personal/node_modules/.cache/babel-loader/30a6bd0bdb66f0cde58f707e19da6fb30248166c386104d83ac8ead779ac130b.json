{"ast":null,"code":"import _classCallCheck from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Loader, FileLoader, NumberKeyframeTrack, AnimationClip, BufferAttribute } from \"three\";\nvar MDDLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(MDDLoader, _Loader);\n  var _super = _createSuper(MDDLoader);\n  function MDDLoader(manager) {\n    _classCallCheck(this, MDDLoader);\n    return _super.call(this, manager);\n  }\n  _createClass(MDDLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType(\"arraybuffer\");\n      loader.load(url, function (data) {\n        onLoad(scope.parse(data));\n      }, onProgress, onError);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(data) {\n      var view = new DataView(data);\n      var totalFrames = view.getUint32(0);\n      var totalPoints = view.getUint32(4);\n      var offset = 8;\n      var times = new Float32Array(totalFrames);\n      var values = new Float32Array(totalFrames * totalFrames).fill(0);\n      for (var i = 0; i < totalFrames; i++) {\n        times[i] = view.getFloat32(offset);\n        offset += 4;\n        values[totalFrames * i + i] = 1;\n      }\n      var track = new NumberKeyframeTrack(\".morphTargetInfluences\", times, values);\n      var clip = new AnimationClip(\"default\", times[times.length - 1], [track]);\n      var morphTargets = [];\n      for (var _i = 0; _i < totalFrames; _i++) {\n        var morphTarget = new Float32Array(totalPoints * 3);\n        for (var j = 0; j < totalPoints; j++) {\n          var stride = j * 3;\n          morphTarget[stride + 0] = view.getFloat32(offset);\n          offset += 4;\n          morphTarget[stride + 1] = view.getFloat32(offset);\n          offset += 4;\n          morphTarget[stride + 2] = view.getFloat32(offset);\n          offset += 4;\n        }\n        var attribute = new BufferAttribute(morphTarget, 3);\n        attribute.name = \"morph_\" + _i;\n        morphTargets.push(attribute);\n      }\n      return {\n        morphTargets: morphTargets,\n        clip: clip\n      };\n    }\n  }]);\n  return MDDLoader;\n}(Loader);\nexport { MDDLoader };","map":{"version":3,"names":["Loader","FileLoader","NumberKeyframeTrack","AnimationClip","BufferAttribute","MDDLoader","_Loader","_inherits","_super","_createSuper","manager","_classCallCheck","call","_createClass","key","value","load","url","onLoad","onProgress","onError","scope","loader","setPath","path","setResponseType","data","parse","view","DataView","totalFrames","getUint32","totalPoints","offset","times","Float32Array","values","fill","i","getFloat32","track","clip","length","morphTargets","morphTarget","j","stride","attribute","name","push"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/three-stdlib@2.23.7_three@0.151.3/node_modules/three-stdlib/loaders/MDDLoader.js"],"sourcesContent":["import { Loader, FileLoader, NumberKeyframeTrack, AnimationClip, BufferAttribute } from \"three\";\nclass MDDLoader extends Loader {\n  constructor(manager) {\n    super(manager);\n  }\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setResponseType(\"arraybuffer\");\n    loader.load(\n      url,\n      function(data) {\n        onLoad(scope.parse(data));\n      },\n      onProgress,\n      onError\n    );\n  }\n  parse(data) {\n    const view = new DataView(data);\n    const totalFrames = view.getUint32(0);\n    const totalPoints = view.getUint32(4);\n    let offset = 8;\n    const times = new Float32Array(totalFrames);\n    const values = new Float32Array(totalFrames * totalFrames).fill(0);\n    for (let i = 0; i < totalFrames; i++) {\n      times[i] = view.getFloat32(offset);\n      offset += 4;\n      values[totalFrames * i + i] = 1;\n    }\n    const track = new NumberKeyframeTrack(\".morphTargetInfluences\", times, values);\n    const clip = new AnimationClip(\"default\", times[times.length - 1], [track]);\n    const morphTargets = [];\n    for (let i = 0; i < totalFrames; i++) {\n      const morphTarget = new Float32Array(totalPoints * 3);\n      for (let j = 0; j < totalPoints; j++) {\n        const stride = j * 3;\n        morphTarget[stride + 0] = view.getFloat32(offset);\n        offset += 4;\n        morphTarget[stride + 1] = view.getFloat32(offset);\n        offset += 4;\n        morphTarget[stride + 2] = view.getFloat32(offset);\n        offset += 4;\n      }\n      const attribute = new BufferAttribute(morphTarget, 3);\n      attribute.name = \"morph_\" + i;\n      morphTargets.push(attribute);\n    }\n    return {\n      morphTargets,\n      clip\n    };\n  }\n}\nexport {\n  MDDLoader\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}