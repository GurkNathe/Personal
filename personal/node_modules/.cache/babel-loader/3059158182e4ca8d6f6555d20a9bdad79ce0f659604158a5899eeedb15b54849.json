{"ast":null,"code":"import{useEffect,useMemo,useState}from\"react\";import{useLoaderData}from\"react-router-dom\";import RSS from\"./RSS\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const articleLoader=async()=>{const res=await fetch(\"https://raw.githubusercontent.com/GurkNathe/Personal/main/articles/articles.json\");const articles=res.json();return articles;};export default function RSSFeed(){const data=useLoaderData();const[xml,setXML]=useState();const parser=useMemo(()=>{return new DOMParser();},[]);const serial=new XMLSerializer();useEffect(()=>{let feed=new RSS({title:\"Ethan's Blog\",description:\"A catalogue of my various articles.\",url:\"https://gurknathe.github.io/Personal/#/rss.xml\",copyright:\"2023 Ethan Krug\",language:\"en\"});data.forEach(item=>{feed.addItem({title:item.title,description:item.summary,url:\"https://gurknathe.github.io/Personal/#/blog/\".concat(item.contentUrl,\"/article\"),guid:item.contentUrl,categories:item.tags,author:'Ethan Krug',date:item.timestamp,imageUrl:item.thumbnailUrl});});setXML(parser.parseFromString(feed.createXML(),\"application/xml\"));},[data,parser]);return/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"a\",{href:process.env.PUBLIC_URL+\"/resources/articles.xml\",target:\"_blank\",rel:\"noreferrer\",children:\"Go To Feed\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),xml?/*#__PURE__*/_jsx(\"a\",{href:URL.createObjectURL(new Blob([serial.serializeToString(xml)],{type:'text/xml'})),download:\"articles.xml\",target:\"_blank\",rel:\"noreferrer\",children:\"Download Feed\"}):/*#__PURE__*/_jsx(_Fragment,{})]});}","map":{"version":3,"names":["useEffect","useMemo","useState","useLoaderData","RSS","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","articleLoader","res","fetch","articles","json","RSSFeed","data","xml","setXML","parser","DOMParser","serial","XMLSerializer","feed","title","description","url","copyright","language","forEach","item","addItem","summary","concat","contentUrl","guid","categories","tags","author","date","timestamp","imageUrl","thumbnailUrl","parseFromString","createXML","style","margin","children","href","process","env","PUBLIC_URL","target","rel","URL","createObjectURL","Blob","serializeToString","type","download"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/src/components/RSSFeed.tsx"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\nimport { useLoaderData } from \"react-router-dom\";\nimport { LoadedArticle } from \"./BlogPost\";\n\nimport RSS from \"./RSS\";\n\nexport const articleLoader = async (): Promise<any> => {\n    const res = await fetch(\"https://raw.githubusercontent.com/GurkNathe/Personal/main/articles/articles.json\");\n    const articles = res.json();\n    return articles;\n};\n\nexport default function RSSFeed() {\n    const data = useLoaderData() as LoadedArticle[];\n    const [xml, setXML] = useState<Document>();\n    const parser = useMemo(() => {\n        return new DOMParser();\n    }, []);\n    const serial = new XMLSerializer();\n\n    useEffect(() => {\n        let feed = new RSS({\n            title: \"Ethan's Blog\",\n            description: \"A catalogue of my various articles.\",\n            url: \"https://gurknathe.github.io/Personal/#/rss.xml\",\n            copyright: \"2023 Ethan Krug\",\n            language: \"en\"\n        });\n\n        data.forEach((item) => {\n            feed.addItem({\n                title:  item.title,\n                description: item.summary,\n                url: `https://gurknathe.github.io/Personal/#/blog/${item.contentUrl}/article`,\n                guid: item.contentUrl,\n                categories: item.tags,\n                author: 'Ethan Krug',\n                date: item.timestamp,\n                imageUrl: item.thumbnailUrl\n            });\n        })\n\n        setXML(parser.parseFromString(feed.createXML(), \"application/xml\"));\n    }, [data, parser]);\n\n    return(\n        <div style={{ margin: \"10px\" }}>\n            <a href={process.env.PUBLIC_URL + \"/resources/articles.xml\"} target=\"_blank\" rel=\"noreferrer\">\n                Go To Feed\n            </a>\n            <br/>\n            <br/>\n            {\n                xml ? \n                <a href={URL.createObjectURL(new Blob([serial.serializeToString(xml!)], { type: 'text/xml' }))} download=\"articles.xml\" target=\"_blank\" rel=\"noreferrer\">\n                    Download Feed\n                </a> :\n                <></>\n            }\n        </div>\n    )\n}"],"mappings":"AAAA,OAASA,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CACpD,OAASC,aAAa,KAAQ,kBAAkB,CAGhD,MAAO,CAAAC,GAAG,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExB,MAAO,MAAM,CAAAC,aAAa,CAAG,KAAAA,CAAA,GAA0B,CACnD,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,kFAAkF,CAAC,CAC3G,KAAM,CAAAC,QAAQ,CAAGF,GAAG,CAACG,IAAI,CAAC,CAAC,CAC3B,MAAO,CAAAD,QAAQ,CACnB,CAAC,CAED,cAAe,SAAS,CAAAE,OAAOA,CAAA,CAAG,CAC9B,KAAM,CAAAC,IAAI,CAAGd,aAAa,CAAC,CAAoB,CAC/C,KAAM,CAACe,GAAG,CAAEC,MAAM,CAAC,CAAGjB,QAAQ,CAAW,CAAC,CAC1C,KAAM,CAAAkB,MAAM,CAAGnB,OAAO,CAAC,IAAM,CACzB,MAAO,IAAI,CAAAoB,SAAS,CAAC,CAAC,CAC1B,CAAC,CAAE,EAAE,CAAC,CACN,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,aAAa,CAAC,CAAC,CAElCvB,SAAS,CAAC,IAAM,CACZ,GAAI,CAAAwB,IAAI,CAAG,GAAI,CAAApB,GAAG,CAAC,CACfqB,KAAK,CAAE,cAAc,CACrBC,WAAW,CAAE,qCAAqC,CAClDC,GAAG,CAAE,gDAAgD,CACrDC,SAAS,CAAE,iBAAiB,CAC5BC,QAAQ,CAAE,IACd,CAAC,CAAC,CAEFZ,IAAI,CAACa,OAAO,CAAEC,IAAI,EAAK,CACnBP,IAAI,CAACQ,OAAO,CAAC,CACTP,KAAK,CAAGM,IAAI,CAACN,KAAK,CAClBC,WAAW,CAAEK,IAAI,CAACE,OAAO,CACzBN,GAAG,gDAAAO,MAAA,CAAiDH,IAAI,CAACI,UAAU,YAAU,CAC7EC,IAAI,CAAEL,IAAI,CAACI,UAAU,CACrBE,UAAU,CAAEN,IAAI,CAACO,IAAI,CACrBC,MAAM,CAAE,YAAY,CACpBC,IAAI,CAAET,IAAI,CAACU,SAAS,CACpBC,QAAQ,CAAEX,IAAI,CAACY,YACnB,CAAC,CAAC,CACN,CAAC,CAAC,CAEFxB,MAAM,CAACC,MAAM,CAACwB,eAAe,CAACpB,IAAI,CAACqB,SAAS,CAAC,CAAC,CAAE,iBAAiB,CAAC,CAAC,CACvE,CAAC,CAAE,CAAC5B,IAAI,CAAEG,MAAM,CAAC,CAAC,CAElB,mBACIV,KAAA,QAAKoC,KAAK,CAAE,CAAEC,MAAM,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC3B1C,IAAA,MAAG2C,IAAI,CAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,CAAG,yBAA0B,CAACC,MAAM,CAAC,QAAQ,CAACC,GAAG,CAAC,YAAY,CAAAN,QAAA,CAAC,YAE9F,CAAG,CAAC,cACJ1C,IAAA,QAAI,CAAC,cACLA,IAAA,QAAI,CAAC,CAEDY,GAAG,cACHZ,IAAA,MAAG2C,IAAI,CAAEM,GAAG,CAACC,eAAe,CAAC,GAAI,CAAAC,IAAI,CAAC,CAACnC,MAAM,CAACoC,iBAAiB,CAACxC,GAAI,CAAC,CAAC,CAAE,CAAEyC,IAAI,CAAE,UAAW,CAAC,CAAC,CAAE,CAACC,QAAQ,CAAC,cAAc,CAACP,MAAM,CAAC,QAAQ,CAACC,GAAG,CAAC,YAAY,CAAAN,QAAA,CAAC,eAEzJ,CAAG,CAAC,cACJ1C,IAAA,CAAAE,SAAA,GAAI,CAAC,EAER,CAAC,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}