{"ast":null,"code":"import _classCallCheck from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\nvar __publicField = function __publicField(obj, key, value) {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { Pass, FullScreenQuad } from \"./Pass.js\";\nimport { WebGLRenderTarget, NearestFilter, MeshDepthMaterial, RGBADepthPacking, NoBlending, UniformsUtils, ShaderMaterial, Color } from \"three\";\nimport { BokehShader } from \"../shaders/BokehShader.js\";\nvar BokehPass = /*#__PURE__*/function (_Pass) {\n  _inherits(BokehPass, _Pass);\n  var _super = _createSuper(BokehPass);\n  function BokehPass(scene, camera, params) {\n    var _this;\n    _classCallCheck(this, BokehPass);\n    _this = _super.call(this);\n    __publicField(_assertThisInitialized(_this), \"scene\");\n    __publicField(_assertThisInitialized(_this), \"camera\");\n    __publicField(_assertThisInitialized(_this), \"renderTargetDepth\");\n    __publicField(_assertThisInitialized(_this), \"materialDepth\");\n    __publicField(_assertThisInitialized(_this), \"materialBokeh\");\n    __publicField(_assertThisInitialized(_this), \"fsQuad\");\n    __publicField(_assertThisInitialized(_this), \"_oldClearColor\");\n    __publicField(_assertThisInitialized(_this), \"uniforms\");\n    _this.scene = scene;\n    _this.camera = camera;\n    var focus = params.focus !== void 0 ? params.focus : 1;\n    var aspect = params.aspect !== void 0 ? params.aspect : camera.aspect;\n    var aperture = params.aperture !== void 0 ? params.aperture : 0.025;\n    var maxblur = params.maxblur !== void 0 ? params.maxblur : 1;\n    var width = params.width || window.innerWidth || 1;\n    var height = params.height || window.innerHeight || 1;\n    _this.renderTargetDepth = new WebGLRenderTarget(width, height, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter\n    });\n    _this.renderTargetDepth.texture.name = \"BokehPass.depth\";\n    _this.materialDepth = new MeshDepthMaterial();\n    _this.materialDepth.depthPacking = RGBADepthPacking;\n    _this.materialDepth.blending = NoBlending;\n    if (BokehShader === void 0) {\n      console.error(\"BokehPass relies on BokehShader\");\n    }\n    var bokehShader = BokehShader;\n    var bokehUniforms = UniformsUtils.clone(bokehShader.uniforms);\n    bokehUniforms[\"tDepth\"].value = _this.renderTargetDepth.texture;\n    bokehUniforms[\"focus\"].value = focus;\n    bokehUniforms[\"aspect\"].value = aspect;\n    bokehUniforms[\"aperture\"].value = aperture;\n    bokehUniforms[\"maxblur\"].value = maxblur;\n    bokehUniforms[\"nearClip\"].value = camera.near;\n    bokehUniforms[\"farClip\"].value = camera.far;\n    _this.materialBokeh = new ShaderMaterial({\n      defines: Object.assign({}, bokehShader.defines),\n      uniforms: bokehUniforms,\n      vertexShader: bokehShader.vertexShader,\n      fragmentShader: bokehShader.fragmentShader\n    });\n    _this.uniforms = bokehUniforms;\n    _this.needsSwap = false;\n    _this.fsQuad = new FullScreenQuad(_this.materialBokeh);\n    _this._oldClearColor = new Color();\n    return _this;\n  }\n  _createClass(BokehPass, [{\n    key: \"render\",\n    value: function render(renderer, writeBuffer, readBuffer) {\n      this.scene.overrideMaterial = this.materialDepth;\n      renderer.getClearColor(this._oldClearColor);\n      var oldClearAlpha = renderer.getClearAlpha();\n      var oldAutoClear = renderer.autoClear;\n      renderer.autoClear = false;\n      renderer.setClearColor(16777215);\n      renderer.setClearAlpha(1);\n      renderer.setRenderTarget(this.renderTargetDepth);\n      renderer.clear();\n      renderer.render(this.scene, this.camera);\n      this.uniforms[\"tColor\"].value = readBuffer.texture;\n      this.uniforms[\"nearClip\"].value = this.camera.near;\n      this.uniforms[\"farClip\"].value = this.camera.far;\n      if (this.renderToScreen) {\n        renderer.setRenderTarget(null);\n        this.fsQuad.render(renderer);\n      } else {\n        renderer.setRenderTarget(writeBuffer);\n        renderer.clear();\n        this.fsQuad.render(renderer);\n      }\n      this.scene.overrideMaterial = null;\n      renderer.setClearColor(this._oldClearColor);\n      renderer.setClearAlpha(oldClearAlpha);\n      renderer.autoClear = oldAutoClear;\n    }\n  }]);\n  return BokehPass;\n}(Pass);\nexport { BokehPass };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","Pass","FullScreenQuad","WebGLRenderTarget","NearestFilter","MeshDepthMaterial","RGBADepthPacking","NoBlending","UniformsUtils","ShaderMaterial","Color","BokehShader","BokehPass","_Pass","_inherits","_super","_createSuper","scene","camera","params","_this","_classCallCheck","call","_assertThisInitialized","focus","aspect","aperture","maxblur","width","window","innerWidth","height","innerHeight","renderTargetDepth","minFilter","magFilter","texture","name","materialDepth","depthPacking","blending","console","error","bokehShader","bokehUniforms","clone","uniforms","near","far","materialBokeh","defines","assign","vertexShader","fragmentShader","needsSwap","fsQuad","_oldClearColor","_createClass","render","renderer","writeBuffer","readBuffer","overrideMaterial","getClearColor","oldClearAlpha","getClearAlpha","oldAutoClear","autoClear","setClearColor","setClearAlpha","setRenderTarget","clear","renderToScreen"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/three-stdlib@2.23.7_three@0.151.3/node_modules/three-stdlib/postprocessing/BokehPass.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { Pass, FullScreenQuad } from \"./Pass.js\";\nimport { WebGLRenderTarget, NearestFilter, MeshDepthMaterial, RGBADepthPacking, NoBlending, UniformsUtils, ShaderMaterial, Color } from \"three\";\nimport { BokehShader } from \"../shaders/BokehShader.js\";\nclass BokehPass extends Pass {\n  constructor(scene, camera, params) {\n    super();\n    __publicField(this, \"scene\");\n    __publicField(this, \"camera\");\n    __publicField(this, \"renderTargetDepth\");\n    __publicField(this, \"materialDepth\");\n    __publicField(this, \"materialBokeh\");\n    __publicField(this, \"fsQuad\");\n    __publicField(this, \"_oldClearColor\");\n    __publicField(this, \"uniforms\");\n    this.scene = scene;\n    this.camera = camera;\n    const focus = params.focus !== void 0 ? params.focus : 1;\n    const aspect = params.aspect !== void 0 ? params.aspect : camera.aspect;\n    const aperture = params.aperture !== void 0 ? params.aperture : 0.025;\n    const maxblur = params.maxblur !== void 0 ? params.maxblur : 1;\n    const width = params.width || window.innerWidth || 1;\n    const height = params.height || window.innerHeight || 1;\n    this.renderTargetDepth = new WebGLRenderTarget(width, height, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter\n    });\n    this.renderTargetDepth.texture.name = \"BokehPass.depth\";\n    this.materialDepth = new MeshDepthMaterial();\n    this.materialDepth.depthPacking = RGBADepthPacking;\n    this.materialDepth.blending = NoBlending;\n    if (BokehShader === void 0) {\n      console.error(\"BokehPass relies on BokehShader\");\n    }\n    const bokehShader = BokehShader;\n    const bokehUniforms = UniformsUtils.clone(bokehShader.uniforms);\n    bokehUniforms[\"tDepth\"].value = this.renderTargetDepth.texture;\n    bokehUniforms[\"focus\"].value = focus;\n    bokehUniforms[\"aspect\"].value = aspect;\n    bokehUniforms[\"aperture\"].value = aperture;\n    bokehUniforms[\"maxblur\"].value = maxblur;\n    bokehUniforms[\"nearClip\"].value = camera.near;\n    bokehUniforms[\"farClip\"].value = camera.far;\n    this.materialBokeh = new ShaderMaterial({\n      defines: Object.assign({}, bokehShader.defines),\n      uniforms: bokehUniforms,\n      vertexShader: bokehShader.vertexShader,\n      fragmentShader: bokehShader.fragmentShader\n    });\n    this.uniforms = bokehUniforms;\n    this.needsSwap = false;\n    this.fsQuad = new FullScreenQuad(this.materialBokeh);\n    this._oldClearColor = new Color();\n  }\n  render(renderer, writeBuffer, readBuffer) {\n    this.scene.overrideMaterial = this.materialDepth;\n    renderer.getClearColor(this._oldClearColor);\n    const oldClearAlpha = renderer.getClearAlpha();\n    const oldAutoClear = renderer.autoClear;\n    renderer.autoClear = false;\n    renderer.setClearColor(16777215);\n    renderer.setClearAlpha(1);\n    renderer.setRenderTarget(this.renderTargetDepth);\n    renderer.clear();\n    renderer.render(this.scene, this.camera);\n    this.uniforms[\"tColor\"].value = readBuffer.texture;\n    this.uniforms[\"nearClip\"].value = this.camera.near;\n    this.uniforms[\"farClip\"].value = this.camera.far;\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer);\n      renderer.clear();\n      this.fsQuad.render(renderer);\n    }\n    this.scene.overrideMaterial = null;\n    renderer.setClearColor(this._oldClearColor);\n    renderer.setClearAlpha(oldClearAlpha);\n    renderer.autoClear = oldAutoClear;\n  }\n}\nexport {\n  BokehPass\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}