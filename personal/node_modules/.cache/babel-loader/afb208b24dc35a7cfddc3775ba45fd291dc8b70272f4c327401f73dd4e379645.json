{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { Pass, FullScreenQuad } from \"./Pass.js\";\nimport { WebGLRenderTarget, NearestFilter, MeshDepthMaterial, RGBADepthPacking, NoBlending, UniformsUtils, ShaderMaterial, Color } from \"three\";\nimport { BokehShader } from \"../shaders/BokehShader.js\";\nclass BokehPass extends Pass {\n  constructor(scene, camera, params) {\n    super();\n    __publicField(this, \"scene\");\n    __publicField(this, \"camera\");\n    __publicField(this, \"renderTargetDepth\");\n    __publicField(this, \"materialDepth\");\n    __publicField(this, \"materialBokeh\");\n    __publicField(this, \"fsQuad\");\n    __publicField(this, \"_oldClearColor\");\n    __publicField(this, \"uniforms\");\n    this.scene = scene;\n    this.camera = camera;\n    const focus = params.focus !== void 0 ? params.focus : 1;\n    const aspect = params.aspect !== void 0 ? params.aspect : camera.aspect;\n    const aperture = params.aperture !== void 0 ? params.aperture : 0.025;\n    const maxblur = params.maxblur !== void 0 ? params.maxblur : 1;\n    const width = params.width || window.innerWidth || 1;\n    const height = params.height || window.innerHeight || 1;\n    this.renderTargetDepth = new WebGLRenderTarget(width, height, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter\n    });\n    this.renderTargetDepth.texture.name = \"BokehPass.depth\";\n    this.materialDepth = new MeshDepthMaterial();\n    this.materialDepth.depthPacking = RGBADepthPacking;\n    this.materialDepth.blending = NoBlending;\n    if (BokehShader === void 0) {\n      console.error(\"BokehPass relies on BokehShader\");\n    }\n    const bokehShader = BokehShader;\n    const bokehUniforms = UniformsUtils.clone(bokehShader.uniforms);\n    bokehUniforms[\"tDepth\"].value = this.renderTargetDepth.texture;\n    bokehUniforms[\"focus\"].value = focus;\n    bokehUniforms[\"aspect\"].value = aspect;\n    bokehUniforms[\"aperture\"].value = aperture;\n    bokehUniforms[\"maxblur\"].value = maxblur;\n    bokehUniforms[\"nearClip\"].value = camera.near;\n    bokehUniforms[\"farClip\"].value = camera.far;\n    this.materialBokeh = new ShaderMaterial({\n      defines: Object.assign({}, bokehShader.defines),\n      uniforms: bokehUniforms,\n      vertexShader: bokehShader.vertexShader,\n      fragmentShader: bokehShader.fragmentShader\n    });\n    this.uniforms = bokehUniforms;\n    this.needsSwap = false;\n    this.fsQuad = new FullScreenQuad(this.materialBokeh);\n    this._oldClearColor = new Color();\n  }\n  render(renderer, writeBuffer, readBuffer) {\n    this.scene.overrideMaterial = this.materialDepth;\n    renderer.getClearColor(this._oldClearColor);\n    const oldClearAlpha = renderer.getClearAlpha();\n    const oldAutoClear = renderer.autoClear;\n    renderer.autoClear = false;\n    renderer.setClearColor(16777215);\n    renderer.setClearAlpha(1);\n    renderer.setRenderTarget(this.renderTargetDepth);\n    renderer.clear();\n    renderer.render(this.scene, this.camera);\n    this.uniforms[\"tColor\"].value = readBuffer.texture;\n    this.uniforms[\"nearClip\"].value = this.camera.near;\n    this.uniforms[\"farClip\"].value = this.camera.far;\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer);\n      renderer.clear();\n      this.fsQuad.render(renderer);\n    }\n    this.scene.overrideMaterial = null;\n    renderer.setClearColor(this._oldClearColor);\n    renderer.setClearAlpha(oldClearAlpha);\n    renderer.autoClear = oldAutoClear;\n  }\n}\nexport { BokehPass };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defNormalProp","obj","key","value","enumerable","configurable","writable","__publicField","Pass","FullScreenQuad","WebGLRenderTarget","NearestFilter","MeshDepthMaterial","RGBADepthPacking","NoBlending","UniformsUtils","ShaderMaterial","Color","BokehShader","BokehPass","constructor","scene","camera","params","focus","aspect","aperture","maxblur","width","window","innerWidth","height","innerHeight","renderTargetDepth","minFilter","magFilter","texture","name","materialDepth","depthPacking","blending","console","error","bokehShader","bokehUniforms","clone","uniforms","near","far","materialBokeh","defines","assign","vertexShader","fragmentShader","needsSwap","fsQuad","_oldClearColor","render","renderer","writeBuffer","readBuffer","overrideMaterial","getClearColor","oldClearAlpha","getClearAlpha","oldAutoClear","autoClear","setClearColor","setClearAlpha","setRenderTarget","clear","renderToScreen"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/three-stdlib@2.23.7_three@0.151.3/node_modules/three-stdlib/postprocessing/BokehPass.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nimport { Pass, FullScreenQuad } from \"./Pass.js\";\nimport { WebGLRenderTarget, NearestFilter, MeshDepthMaterial, RGBADepthPacking, NoBlending, UniformsUtils, ShaderMaterial, Color } from \"three\";\nimport { BokehShader } from \"../shaders/BokehShader.js\";\nclass BokehPass extends Pass {\n  constructor(scene, camera, params) {\n    super();\n    __publicField(this, \"scene\");\n    __publicField(this, \"camera\");\n    __publicField(this, \"renderTargetDepth\");\n    __publicField(this, \"materialDepth\");\n    __publicField(this, \"materialBokeh\");\n    __publicField(this, \"fsQuad\");\n    __publicField(this, \"_oldClearColor\");\n    __publicField(this, \"uniforms\");\n    this.scene = scene;\n    this.camera = camera;\n    const focus = params.focus !== void 0 ? params.focus : 1;\n    const aspect = params.aspect !== void 0 ? params.aspect : camera.aspect;\n    const aperture = params.aperture !== void 0 ? params.aperture : 0.025;\n    const maxblur = params.maxblur !== void 0 ? params.maxblur : 1;\n    const width = params.width || window.innerWidth || 1;\n    const height = params.height || window.innerHeight || 1;\n    this.renderTargetDepth = new WebGLRenderTarget(width, height, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter\n    });\n    this.renderTargetDepth.texture.name = \"BokehPass.depth\";\n    this.materialDepth = new MeshDepthMaterial();\n    this.materialDepth.depthPacking = RGBADepthPacking;\n    this.materialDepth.blending = NoBlending;\n    if (BokehShader === void 0) {\n      console.error(\"BokehPass relies on BokehShader\");\n    }\n    const bokehShader = BokehShader;\n    const bokehUniforms = UniformsUtils.clone(bokehShader.uniforms);\n    bokehUniforms[\"tDepth\"].value = this.renderTargetDepth.texture;\n    bokehUniforms[\"focus\"].value = focus;\n    bokehUniforms[\"aspect\"].value = aspect;\n    bokehUniforms[\"aperture\"].value = aperture;\n    bokehUniforms[\"maxblur\"].value = maxblur;\n    bokehUniforms[\"nearClip\"].value = camera.near;\n    bokehUniforms[\"farClip\"].value = camera.far;\n    this.materialBokeh = new ShaderMaterial({\n      defines: Object.assign({}, bokehShader.defines),\n      uniforms: bokehUniforms,\n      vertexShader: bokehShader.vertexShader,\n      fragmentShader: bokehShader.fragmentShader\n    });\n    this.uniforms = bokehUniforms;\n    this.needsSwap = false;\n    this.fsQuad = new FullScreenQuad(this.materialBokeh);\n    this._oldClearColor = new Color();\n  }\n  render(renderer, writeBuffer, readBuffer) {\n    this.scene.overrideMaterial = this.materialDepth;\n    renderer.getClearColor(this._oldClearColor);\n    const oldClearAlpha = renderer.getClearAlpha();\n    const oldAutoClear = renderer.autoClear;\n    renderer.autoClear = false;\n    renderer.setClearColor(16777215);\n    renderer.setClearAlpha(1);\n    renderer.setRenderTarget(this.renderTargetDepth);\n    renderer.clear();\n    renderer.render(this.scene, this.camera);\n    this.uniforms[\"tColor\"].value = readBuffer.texture;\n    this.uniforms[\"nearClip\"].value = this.camera.near;\n    this.uniforms[\"farClip\"].value = this.camera.far;\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      this.fsQuad.render(renderer);\n    } else {\n      renderer.setRenderTarget(writeBuffer);\n      renderer.clear();\n      this.fsQuad.render(renderer);\n    }\n    this.scene.overrideMaterial = null;\n    renderer.setClearColor(this._oldClearColor);\n    renderer.setClearAlpha(oldClearAlpha);\n    renderer.autoClear = oldAutoClear;\n  }\n}\nexport {\n  BokehPass\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}