{"ast":null,"code":"import _slicedToArray from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useFrame, useThree, createPortal } from '@react-three/fiber';\nimport * as React from 'react';\nimport { Vector3, Object3D, Vector2 } from 'three';\nimport { MeshLineGeometry, MeshLineMaterial } from 'meshline';\nvar defaults = {\n  width: 0.2,\n  length: 1,\n  decay: 1,\n  local: false,\n  stride: 0,\n  interval: 1\n};\nvar shiftLeft = function shiftLeft(collection) {\n  var steps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  collection.set(collection.subarray(steps));\n  collection.fill(-Infinity, -steps);\n  return collection;\n};\nfunction useTrail(target, settings) {\n  var _defaults$settings = _objectSpread(_objectSpread({}, defaults), settings),\n    length = _defaults$settings.length,\n    local = _defaults$settings.local,\n    decay = _defaults$settings.decay,\n    interval = _defaults$settings.interval,\n    stride = _defaults$settings.stride;\n  var points = React.useRef();\n  var _React$useState = React.useState(function () {\n      return new Vector3();\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 1),\n    worldPosition = _React$useState2[0];\n  React.useLayoutEffect(function () {\n    if (target) {\n      points.current = Float32Array.from({\n        length: length * 10 * 3\n      }, function (_, i) {\n        return target.position.getComponent(i % 3);\n      });\n    }\n  }, [length, target]);\n  var prevPosition = React.useRef(new Vector3());\n  var frameCount = React.useRef(0);\n  useFrame(function () {\n    if (!target) return;\n    if (!points.current) return;\n    if (frameCount.current === 0) {\n      var newPosition;\n      if (local) {\n        newPosition = target.position;\n      } else {\n        target.getWorldPosition(worldPosition);\n        newPosition = worldPosition;\n      }\n      var steps = 1 * decay;\n      for (var i = 0; i < steps; i++) {\n        if (newPosition.distanceTo(prevPosition.current) < stride) continue;\n        shiftLeft(points.current, 3);\n        points.current.set(newPosition.toArray(), points.current.length - 3);\n      }\n      prevPosition.current.copy(newPosition);\n    }\n    frameCount.current++;\n    frameCount.current = frameCount.current % interval;\n  });\n  return points;\n}\nvar Trail = /*#__PURE__*/React.forwardRef(function (props, forwardRef) {\n  var children = props.children;\n  var _defaults$props = _objectSpread(_objectSpread({}, defaults), props),\n    width = _defaults$props.width,\n    length = _defaults$props.length,\n    decay = _defaults$props.decay,\n    local = _defaults$props.local,\n    stride = _defaults$props.stride,\n    interval = _defaults$props.interval;\n  var _props$color = props.color,\n    color = _props$color === void 0 ? 'hotpink' : _props$color,\n    attenuation = props.attenuation,\n    target = props.target;\n  var size = useThree(function (s) {\n    return s.size;\n  });\n  var scene = useThree(function (s) {\n    return s.scene;\n  });\n  var ref = React.useRef(null);\n  var _React$useState3 = React.useState(null),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    anchor = _React$useState4[0],\n    setAnchor = _React$useState4[1];\n  var points = useTrail(anchor, {\n    length: length,\n    decay: decay,\n    local: local,\n    stride: stride,\n    interval: interval\n  });\n  React.useEffect(function () {\n    var t = (target == null ? void 0 : target.current) || ref.current.children.find(function (o) {\n      return o instanceof Object3D;\n    });\n    if (t) {\n      setAnchor(t);\n    }\n  }, [points, target]);\n  var geo = React.useMemo(function () {\n    return new MeshLineGeometry();\n  }, []);\n  var mat = React.useMemo(function () {\n    var _matOverride;\n    var m = new MeshLineMaterial({\n      lineWidth: 0.1 * width,\n      color: color,\n      sizeAttenuation: 1,\n      resolution: new Vector2(size.width, size.height)\n    }); // Get and apply first <meshLineMaterial /> from children\n\n    var matOverride;\n    if (children) {\n      if (Array.isArray(children)) {\n        matOverride = children.find(function (child) {\n          var c = child;\n          return typeof c.type === 'string' && c.type === 'meshLineMaterial';\n        });\n      } else {\n        var c = children;\n        if (typeof c.type === 'string' && c.type === 'meshLineMaterial') {\n          matOverride = c;\n        }\n      }\n    }\n    if (typeof ((_matOverride = matOverride) == null ? void 0 : _matOverride.props) === 'object') {\n      m.setValues(matOverride.props);\n    }\n    return m;\n  }, [width, color, size, children]);\n  React.useEffect(function () {\n    mat.uniforms.resolution.value.set(size.width, size.height);\n  }, [size]);\n  useFrame(function () {\n    if (!points.current) return;\n    geo.setPoints(points.current, attenuation);\n  });\n  return /*#__PURE__*/React.createElement(\"group\", null, createPortal( /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: forwardRef,\n    geometry: geo,\n    material: mat\n  }), scene), /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, children));\n});\nexport { Trail, useTrail };","map":{"version":3,"names":["useFrame","useThree","createPortal","React","Vector3","Object3D","Vector2","MeshLineGeometry","MeshLineMaterial","defaults","width","length","decay","local","stride","interval","shiftLeft","collection","steps","arguments","undefined","set","subarray","fill","Infinity","useTrail","target","settings","_defaults$settings","_objectSpread","points","useRef","_React$useState","useState","_React$useState2","_slicedToArray","worldPosition","useLayoutEffect","current","Float32Array","from","_","i","position","getComponent","prevPosition","frameCount","newPosition","getWorldPosition","distanceTo","toArray","copy","Trail","forwardRef","props","children","_defaults$props","_props$color","color","attenuation","size","s","scene","ref","_React$useState3","_React$useState4","anchor","setAnchor","useEffect","t","find","o","geo","useMemo","mat","_matOverride","m","lineWidth","sizeAttenuation","resolution","height","matOverride","Array","isArray","child","c","type","setValues","uniforms","value","setPoints","createElement","geometry","material"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@react-three+drei@9.72.1_@react-three+fiber@8.13.0_@types+three@0.150.2_react-dom@18.2.0_react@18.2.0_three@0.151.3/node_modules/@react-three/drei/core/Trail.js"],"sourcesContent":["import { useFrame, useThree, createPortal } from '@react-three/fiber';\nimport * as React from 'react';\nimport { Vector3, Object3D, Vector2 } from 'three';\nimport { MeshLineGeometry, MeshLineMaterial } from 'meshline';\n\nconst defaults = {\n  width: 0.2,\n  length: 1,\n  decay: 1,\n  local: false,\n  stride: 0,\n  interval: 1\n};\n\nconst shiftLeft = (collection, steps = 1) => {\n  collection.set(collection.subarray(steps));\n  collection.fill(-Infinity, -steps);\n  return collection;\n};\n\nfunction useTrail(target, settings) {\n  const {\n    length,\n    local,\n    decay,\n    interval,\n    stride\n  } = { ...defaults,\n    ...settings\n  };\n  const points = React.useRef();\n  const [worldPosition] = React.useState(() => new Vector3());\n  React.useLayoutEffect(() => {\n    if (target) {\n      points.current = Float32Array.from({\n        length: length * 10 * 3\n      }, (_, i) => target.position.getComponent(i % 3));\n    }\n  }, [length, target]);\n  const prevPosition = React.useRef(new Vector3());\n  const frameCount = React.useRef(0);\n  useFrame(() => {\n    if (!target) return;\n    if (!points.current) return;\n\n    if (frameCount.current === 0) {\n      let newPosition;\n\n      if (local) {\n        newPosition = target.position;\n      } else {\n        target.getWorldPosition(worldPosition);\n        newPosition = worldPosition;\n      }\n\n      const steps = 1 * decay;\n\n      for (let i = 0; i < steps; i++) {\n        if (newPosition.distanceTo(prevPosition.current) < stride) continue;\n        shiftLeft(points.current, 3);\n        points.current.set(newPosition.toArray(), points.current.length - 3);\n      }\n\n      prevPosition.current.copy(newPosition);\n    }\n\n    frameCount.current++;\n    frameCount.current = frameCount.current % interval;\n  });\n  return points;\n}\nconst Trail = /*#__PURE__*/React.forwardRef((props, forwardRef) => {\n  const {\n    children\n  } = props;\n  const {\n    width,\n    length,\n    decay,\n    local,\n    stride,\n    interval\n  } = { ...defaults,\n    ...props\n  };\n  const {\n    color = 'hotpink',\n    attenuation,\n    target\n  } = props;\n  const size = useThree(s => s.size);\n  const scene = useThree(s => s.scene);\n  const ref = React.useRef(null);\n  const [anchor, setAnchor] = React.useState(null);\n  const points = useTrail(anchor, {\n    length,\n    decay,\n    local,\n    stride,\n    interval\n  });\n  React.useEffect(() => {\n    const t = (target == null ? void 0 : target.current) || ref.current.children.find(o => {\n      return o instanceof Object3D;\n    });\n\n    if (t) {\n      setAnchor(t);\n    }\n  }, [points, target]);\n  const geo = React.useMemo(() => new MeshLineGeometry(), []);\n  const mat = React.useMemo(() => {\n    var _matOverride;\n\n    const m = new MeshLineMaterial({\n      lineWidth: 0.1 * width,\n      color: color,\n      sizeAttenuation: 1,\n      resolution: new Vector2(size.width, size.height)\n    }); // Get and apply first <meshLineMaterial /> from children\n\n    let matOverride;\n\n    if (children) {\n      if (Array.isArray(children)) {\n        matOverride = children.find(child => {\n          const c = child;\n          return typeof c.type === 'string' && c.type === 'meshLineMaterial';\n        });\n      } else {\n        const c = children;\n\n        if (typeof c.type === 'string' && c.type === 'meshLineMaterial') {\n          matOverride = c;\n        }\n      }\n    }\n\n    if (typeof ((_matOverride = matOverride) == null ? void 0 : _matOverride.props) === 'object') {\n      m.setValues(matOverride.props);\n    }\n\n    return m;\n  }, [width, color, size, children]);\n  React.useEffect(() => {\n    mat.uniforms.resolution.value.set(size.width, size.height);\n  }, [size]);\n  useFrame(() => {\n    if (!points.current) return;\n    geo.setPoints(points.current, attenuation);\n  });\n  return /*#__PURE__*/React.createElement(\"group\", null, createPortal( /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: forwardRef,\n    geometry: geo,\n    material: mat\n  }), scene), /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, children));\n});\n\nexport { Trail, useTrail };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}