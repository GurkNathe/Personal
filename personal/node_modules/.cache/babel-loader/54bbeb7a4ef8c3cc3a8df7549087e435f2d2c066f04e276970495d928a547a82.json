{"ast":null,"code":"import _slicedToArray from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport * as React from 'react';\nimport { useState, useContext, useRef, useLayoutEffect, createContext } from 'react';\nimport { useFrame } from '@react-three/fiber';\nvar context = /*#__PURE__*/createContext(null);\nfunction PerformanceMonitor(_ref) {\n  var _ref$iterations = _ref.iterations,\n    iterations = _ref$iterations === void 0 ? 10 : _ref$iterations,\n    _ref$ms = _ref.ms,\n    ms = _ref$ms === void 0 ? 250 : _ref$ms,\n    _ref$threshold = _ref.threshold,\n    threshold = _ref$threshold === void 0 ? 0.75 : _ref$threshold,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 0.1 : _ref$step,\n    _ref$factor = _ref.factor,\n    _factor = _ref$factor === void 0 ? 0.5 : _ref$factor,\n    _ref$flipflops = _ref.flipflops,\n    flipflops = _ref$flipflops === void 0 ? Infinity : _ref$flipflops,\n    _ref$bounds = _ref.bounds,\n    bounds = _ref$bounds === void 0 ? function (refreshrate) {\n      return refreshrate > 100 ? [60, 100] : [40, 60];\n    } : _ref$bounds,\n    onIncline = _ref.onIncline,\n    onDecline = _ref.onDecline,\n    onChange = _ref.onChange,\n    onFallback = _ref.onFallback,\n    children = _ref.children;\n  var decimalPlacesRatio = Math.pow(10, 0);\n  var _useState = useState(function () {\n      return {\n        fps: 0,\n        index: 0,\n        factor: _factor,\n        flipped: 0,\n        refreshrate: 0,\n        fallback: false,\n        frames: [],\n        averages: [],\n        subscriptions: new Map(),\n        subscribe: function subscribe(ref) {\n          var key = Symbol();\n          api.subscriptions.set(key, ref.current);\n          return function () {\n            return void api.subscriptions.delete(key);\n          };\n        }\n      };\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    api = _useState2[0],\n    _ = _useState2[1];\n  var lastFactor = 0;\n  useFrame(function () {\n    var frames = api.frames,\n      averages = api.averages; // If the fallback has been reached do not continue running samples\n\n    if (api.fallback) return;\n    if (averages.length < iterations) {\n      frames.push(performance.now());\n      var msPassed = frames[frames.length - 1] - frames[0];\n      if (msPassed >= ms) {\n        api.fps = Math.round(frames.length / msPassed * 1000 * decimalPlacesRatio) / decimalPlacesRatio;\n        api.refreshrate = Math.max(api.refreshrate, api.fps);\n        averages[api.index++ % iterations] = api.fps;\n        if (averages.length === iterations) {\n          var _bounds = bounds(api.refreshrate),\n            _bounds2 = _slicedToArray(_bounds, 2),\n            lower = _bounds2[0],\n            upper = _bounds2[1];\n          var upperBounds = averages.filter(function (value) {\n            return value >= upper;\n          });\n          var lowerBounds = averages.filter(function (value) {\n            return value < lower;\n          }); // Trigger incline when more than -threshold- avgs exceed the upper bound\n\n          if (upperBounds.length > iterations * threshold) {\n            api.factor = Math.min(1, api.factor + step);\n            api.flipped++;\n            if (onIncline) onIncline(api);\n            api.subscriptions.forEach(function (value) {\n              return value.onIncline && value.onIncline(api);\n            });\n          } // Trigger decline when more than -threshold- avgs are below the lower bound\n\n          if (lowerBounds.length > iterations * threshold) {\n            api.factor = Math.max(0, api.factor - step);\n            api.flipped++;\n            if (onDecline) onDecline(api);\n            api.subscriptions.forEach(function (value) {\n              return value.onDecline && value.onDecline(api);\n            });\n          }\n          if (lastFactor !== api.factor) {\n            lastFactor = api.factor;\n            if (onChange) onChange(api);\n            api.subscriptions.forEach(function (value) {\n              return value.onChange && value.onChange(api);\n            });\n          }\n          if (api.flipped > flipflops && !api.fallback) {\n            api.fallback = true;\n            if (onFallback) onFallback(api);\n            api.subscriptions.forEach(function (value) {\n              return value.onFallback && value.onFallback(api);\n            });\n          }\n          api.averages = []; // Resetting the refreshrate creates more problems than it solves atm\n          // api.refreshrate = 0\n        }\n\n        api.frames = [];\n      }\n    }\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api\n  }, children);\n}\nfunction usePerformanceMonitor(_ref2) {\n  var onIncline = _ref2.onIncline,\n    onDecline = _ref2.onDecline,\n    onChange = _ref2.onChange,\n    onFallback = _ref2.onFallback;\n  var api = useContext(context);\n  var ref = useRef({\n    onIncline: onIncline,\n    onDecline: onDecline,\n    onChange: onChange,\n    onFallback: onFallback\n  });\n  useLayoutEffect(function () {\n    ref.current.onIncline = onIncline;\n    ref.current.onDecline = onDecline;\n    ref.current.onChange = onChange;\n    ref.current.onFallback = onFallback;\n  }, [onIncline, onDecline, onChange, onFallback]);\n  useLayoutEffect(function () {\n    return api.subscribe(ref);\n  }, [api]);\n}\nexport { PerformanceMonitor, usePerformanceMonitor };","map":{"version":3,"names":["React","useState","useContext","useRef","useLayoutEffect","createContext","useFrame","context","PerformanceMonitor","_ref","_ref$iterations","iterations","_ref$ms","ms","_ref$threshold","threshold","_ref$step","step","_ref$factor","factor","_factor","_ref$flipflops","flipflops","Infinity","_ref$bounds","bounds","refreshrate","onIncline","onDecline","onChange","onFallback","children","decimalPlacesRatio","Math","pow","_useState","fps","index","flipped","fallback","frames","averages","subscriptions","Map","subscribe","ref","key","Symbol","api","set","current","delete","_useState2","_slicedToArray","_","lastFactor","length","push","performance","now","msPassed","round","max","_bounds","_bounds2","lower","upper","upperBounds","filter","value","lowerBounds","min","forEach","createElement","Provider","usePerformanceMonitor","_ref2"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@react-three+drei@9.72.1_@react-three+fiber@8.13.0_@types+three@0.150.2_react-dom@18.2.0_react@18.2.0_three@0.151.3/node_modules/@react-three/drei/core/PerformanceMonitor.js"],"sourcesContent":["import * as React from 'react';\nimport { useState, useContext, useRef, useLayoutEffect, createContext } from 'react';\nimport { useFrame } from '@react-three/fiber';\n\nconst context = /*#__PURE__*/createContext(null);\nfunction PerformanceMonitor({\n  iterations = 10,\n  ms = 250,\n  threshold = 0.75,\n  step = 0.1,\n  factor: _factor = 0.5,\n  flipflops = Infinity,\n  bounds = refreshrate => refreshrate > 100 ? [60, 100] : [40, 60],\n  onIncline,\n  onDecline,\n  onChange,\n  onFallback,\n  children\n}) {\n  const decimalPlacesRatio = Math.pow(10, 0);\n  const [api, _] = useState(() => ({\n    fps: 0,\n    index: 0,\n    factor: _factor,\n    flipped: 0,\n    refreshrate: 0,\n    fallback: false,\n    frames: [],\n    averages: [],\n    subscriptions: new Map(),\n    subscribe: ref => {\n      const key = Symbol();\n      api.subscriptions.set(key, ref.current);\n      return () => void api.subscriptions.delete(key);\n    }\n  }));\n  let lastFactor = 0;\n  useFrame(() => {\n    const {\n      frames,\n      averages\n    } = api; // If the fallback has been reached do not continue running samples\n\n    if (api.fallback) return;\n\n    if (averages.length < iterations) {\n      frames.push(performance.now());\n      const msPassed = frames[frames.length - 1] - frames[0];\n\n      if (msPassed >= ms) {\n        api.fps = Math.round(frames.length / msPassed * 1000 * decimalPlacesRatio) / decimalPlacesRatio;\n        api.refreshrate = Math.max(api.refreshrate, api.fps);\n        averages[api.index++ % iterations] = api.fps;\n\n        if (averages.length === iterations) {\n          const [lower, upper] = bounds(api.refreshrate);\n          const upperBounds = averages.filter(value => value >= upper);\n          const lowerBounds = averages.filter(value => value < lower); // Trigger incline when more than -threshold- avgs exceed the upper bound\n\n          if (upperBounds.length > iterations * threshold) {\n            api.factor = Math.min(1, api.factor + step);\n            api.flipped++;\n            if (onIncline) onIncline(api);\n            api.subscriptions.forEach(value => value.onIncline && value.onIncline(api));\n          } // Trigger decline when more than -threshold- avgs are below the lower bound\n\n\n          if (lowerBounds.length > iterations * threshold) {\n            api.factor = Math.max(0, api.factor - step);\n            api.flipped++;\n            if (onDecline) onDecline(api);\n            api.subscriptions.forEach(value => value.onDecline && value.onDecline(api));\n          }\n\n          if (lastFactor !== api.factor) {\n            lastFactor = api.factor;\n            if (onChange) onChange(api);\n            api.subscriptions.forEach(value => value.onChange && value.onChange(api));\n          }\n\n          if (api.flipped > flipflops && !api.fallback) {\n            api.fallback = true;\n            if (onFallback) onFallback(api);\n            api.subscriptions.forEach(value => value.onFallback && value.onFallback(api));\n          }\n\n          api.averages = []; // Resetting the refreshrate creates more problems than it solves atm\n          // api.refreshrate = 0\n        }\n\n        api.frames = [];\n      }\n    }\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: api\n  }, children);\n}\nfunction usePerformanceMonitor({\n  onIncline,\n  onDecline,\n  onChange,\n  onFallback\n}) {\n  const api = useContext(context);\n  const ref = useRef({\n    onIncline,\n    onDecline,\n    onChange,\n    onFallback\n  });\n  useLayoutEffect(() => {\n    ref.current.onIncline = onIncline;\n    ref.current.onDecline = onDecline;\n    ref.current.onChange = onChange;\n    ref.current.onFallback = onFallback;\n  }, [onIncline, onDecline, onChange, onFallback]);\n  useLayoutEffect(() => api.subscribe(ref), [api]);\n}\n\nexport { PerformanceMonitor, usePerformanceMonitor };\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,QAAQ,EAAEC,UAAU,EAAEC,MAAM,EAAEC,eAAe,EAAEC,aAAa,QAAQ,OAAO;AACpF,SAASC,QAAQ,QAAQ,oBAAoB;AAE7C,IAAMC,OAAO,GAAG,aAAaF,aAAa,CAAC,IAAI,CAAC;AAChD,SAASG,kBAAkBA,CAAAC,IAAA,EAaxB;EAAA,IAAAC,eAAA,GAAAD,IAAA,CAZDE,UAAU;IAAVA,UAAU,GAAAD,eAAA,cAAG,EAAE,GAAAA,eAAA;IAAAE,OAAA,GAAAH,IAAA,CACfI,EAAE;IAAFA,EAAE,GAAAD,OAAA,cAAG,GAAG,GAAAA,OAAA;IAAAE,cAAA,GAAAL,IAAA,CACRM,SAAS;IAATA,SAAS,GAAAD,cAAA,cAAG,IAAI,GAAAA,cAAA;IAAAE,SAAA,GAAAP,IAAA,CAChBQ,IAAI;IAAJA,IAAI,GAAAD,SAAA,cAAG,GAAG,GAAAA,SAAA;IAAAE,WAAA,GAAAT,IAAA,CACVU,MAAM;IAAEC,OAAO,GAAAF,WAAA,cAAG,GAAG,GAAAA,WAAA;IAAAG,cAAA,GAAAZ,IAAA,CACrBa,SAAS;IAATA,SAAS,GAAAD,cAAA,cAAGE,QAAQ,GAAAF,cAAA;IAAAG,WAAA,GAAAf,IAAA,CACpBgB,MAAM;IAANA,MAAM,GAAAD,WAAA,cAAG,UAAAE,WAAW;MAAA,OAAIA,WAAW,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC;IAAA,IAAAF,WAAA;IAChEG,SAAS,GAAAlB,IAAA,CAATkB,SAAS;IACTC,SAAS,GAAAnB,IAAA,CAATmB,SAAS;IACTC,QAAQ,GAAApB,IAAA,CAARoB,QAAQ;IACRC,UAAU,GAAArB,IAAA,CAAVqB,UAAU;IACVC,QAAQ,GAAAtB,IAAA,CAARsB,QAAQ;EAER,IAAMC,kBAAkB,GAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;EAC1C,IAAAC,SAAA,GAAiBlC,QAAQ,CAAC;MAAA,OAAO;QAC/BmC,GAAG,EAAE,CAAC;QACNC,KAAK,EAAE,CAAC;QACRlB,MAAM,EAAEC,OAAO;QACfkB,OAAO,EAAE,CAAC;QACVZ,WAAW,EAAE,CAAC;QACda,QAAQ,EAAE,KAAK;QACfC,MAAM,EAAE,EAAE;QACVC,QAAQ,EAAE,EAAE;QACZC,aAAa,EAAE,IAAIC,GAAG,CAAC,CAAC;QACxBC,SAAS,EAAE,SAAAA,UAAAC,GAAG,EAAI;UAChB,IAAMC,GAAG,GAAGC,MAAM,CAAC,CAAC;UACpBC,GAAG,CAACN,aAAa,CAACO,GAAG,CAACH,GAAG,EAAED,GAAG,CAACK,OAAO,CAAC;UACvC,OAAO;YAAA,OAAM,KAAKF,GAAG,CAACN,aAAa,CAACS,MAAM,CAACL,GAAG,CAAC;UAAA;QACjD;MACF,CAAC;IAAA,CAAC,CAAC;IAAAM,UAAA,GAAAC,cAAA,CAAAlB,SAAA;IAfIa,GAAG,GAAAI,UAAA;IAAEE,CAAC,GAAAF,UAAA;EAgBb,IAAIG,UAAU,GAAG,CAAC;EAClBjD,QAAQ,CAAC,YAAM;IACb,IACEkC,MAAM,GAEJQ,GAAG,CAFLR,MAAM;MACNC,QAAQ,GACNO,GAAG,CADLP,QAAQ,CACF,CAAC;;IAET,IAAIO,GAAG,CAACT,QAAQ,EAAE;IAElB,IAAIE,QAAQ,CAACe,MAAM,GAAG7C,UAAU,EAAE;MAChC6B,MAAM,CAACiB,IAAI,CAACC,WAAW,CAACC,GAAG,CAAC,CAAC,CAAC;MAC9B,IAAMC,QAAQ,GAAGpB,MAAM,CAACA,MAAM,CAACgB,MAAM,GAAG,CAAC,CAAC,GAAGhB,MAAM,CAAC,CAAC,CAAC;MAEtD,IAAIoB,QAAQ,IAAI/C,EAAE,EAAE;QAClBmC,GAAG,CAACZ,GAAG,GAAGH,IAAI,CAAC4B,KAAK,CAACrB,MAAM,CAACgB,MAAM,GAAGI,QAAQ,GAAG,IAAI,GAAG5B,kBAAkB,CAAC,GAAGA,kBAAkB;QAC/FgB,GAAG,CAACtB,WAAW,GAAGO,IAAI,CAAC6B,GAAG,CAACd,GAAG,CAACtB,WAAW,EAAEsB,GAAG,CAACZ,GAAG,CAAC;QACpDK,QAAQ,CAACO,GAAG,CAACX,KAAK,EAAE,GAAG1B,UAAU,CAAC,GAAGqC,GAAG,CAACZ,GAAG;QAE5C,IAAIK,QAAQ,CAACe,MAAM,KAAK7C,UAAU,EAAE;UAClC,IAAAoD,OAAA,GAAuBtC,MAAM,CAACuB,GAAG,CAACtB,WAAW,CAAC;YAAAsC,QAAA,GAAAX,cAAA,CAAAU,OAAA;YAAvCE,KAAK,GAAAD,QAAA;YAAEE,KAAK,GAAAF,QAAA;UACnB,IAAMG,WAAW,GAAG1B,QAAQ,CAAC2B,MAAM,CAAC,UAAAC,KAAK;YAAA,OAAIA,KAAK,IAAIH,KAAK;UAAA,EAAC;UAC5D,IAAMI,WAAW,GAAG7B,QAAQ,CAAC2B,MAAM,CAAC,UAAAC,KAAK;YAAA,OAAIA,KAAK,GAAGJ,KAAK;UAAA,EAAC,CAAC,CAAC;;UAE7D,IAAIE,WAAW,CAACX,MAAM,GAAG7C,UAAU,GAAGI,SAAS,EAAE;YAC/CiC,GAAG,CAAC7B,MAAM,GAAGc,IAAI,CAACsC,GAAG,CAAC,CAAC,EAAEvB,GAAG,CAAC7B,MAAM,GAAGF,IAAI,CAAC;YAC3C+B,GAAG,CAACV,OAAO,EAAE;YACb,IAAIX,SAAS,EAAEA,SAAS,CAACqB,GAAG,CAAC;YAC7BA,GAAG,CAACN,aAAa,CAAC8B,OAAO,CAAC,UAAAH,KAAK;cAAA,OAAIA,KAAK,CAAC1C,SAAS,IAAI0C,KAAK,CAAC1C,SAAS,CAACqB,GAAG,CAAC;YAAA,EAAC;UAC7E,CAAC,CAAC;;UAGF,IAAIsB,WAAW,CAACd,MAAM,GAAG7C,UAAU,GAAGI,SAAS,EAAE;YAC/CiC,GAAG,CAAC7B,MAAM,GAAGc,IAAI,CAAC6B,GAAG,CAAC,CAAC,EAAEd,GAAG,CAAC7B,MAAM,GAAGF,IAAI,CAAC;YAC3C+B,GAAG,CAACV,OAAO,EAAE;YACb,IAAIV,SAAS,EAAEA,SAAS,CAACoB,GAAG,CAAC;YAC7BA,GAAG,CAACN,aAAa,CAAC8B,OAAO,CAAC,UAAAH,KAAK;cAAA,OAAIA,KAAK,CAACzC,SAAS,IAAIyC,KAAK,CAACzC,SAAS,CAACoB,GAAG,CAAC;YAAA,EAAC;UAC7E;UAEA,IAAIO,UAAU,KAAKP,GAAG,CAAC7B,MAAM,EAAE;YAC7BoC,UAAU,GAAGP,GAAG,CAAC7B,MAAM;YACvB,IAAIU,QAAQ,EAAEA,QAAQ,CAACmB,GAAG,CAAC;YAC3BA,GAAG,CAACN,aAAa,CAAC8B,OAAO,CAAC,UAAAH,KAAK;cAAA,OAAIA,KAAK,CAACxC,QAAQ,IAAIwC,KAAK,CAACxC,QAAQ,CAACmB,GAAG,CAAC;YAAA,EAAC;UAC3E;UAEA,IAAIA,GAAG,CAACV,OAAO,GAAGhB,SAAS,IAAI,CAAC0B,GAAG,CAACT,QAAQ,EAAE;YAC5CS,GAAG,CAACT,QAAQ,GAAG,IAAI;YACnB,IAAIT,UAAU,EAAEA,UAAU,CAACkB,GAAG,CAAC;YAC/BA,GAAG,CAACN,aAAa,CAAC8B,OAAO,CAAC,UAAAH,KAAK;cAAA,OAAIA,KAAK,CAACvC,UAAU,IAAIuC,KAAK,CAACvC,UAAU,CAACkB,GAAG,CAAC;YAAA,EAAC;UAC/E;UAEAA,GAAG,CAACP,QAAQ,GAAG,EAAE,CAAC,CAAC;UACnB;QACF;;QAEAO,GAAG,CAACR,MAAM,GAAG,EAAE;MACjB;IACF;EACF,CAAC,CAAC;EACF,OAAO,aAAaxC,KAAK,CAACyE,aAAa,CAAClE,OAAO,CAACmE,QAAQ,EAAE;IACxDL,KAAK,EAAErB;EACT,CAAC,EAAEjB,QAAQ,CAAC;AACd;AACA,SAAS4C,qBAAqBA,CAAAC,KAAA,EAK3B;EAAA,IAJDjD,SAAS,GAAAiD,KAAA,CAATjD,SAAS;IACTC,SAAS,GAAAgD,KAAA,CAAThD,SAAS;IACTC,QAAQ,GAAA+C,KAAA,CAAR/C,QAAQ;IACRC,UAAU,GAAA8C,KAAA,CAAV9C,UAAU;EAEV,IAAMkB,GAAG,GAAG9C,UAAU,CAACK,OAAO,CAAC;EAC/B,IAAMsC,GAAG,GAAG1C,MAAM,CAAC;IACjBwB,SAAS,EAATA,SAAS;IACTC,SAAS,EAATA,SAAS;IACTC,QAAQ,EAARA,QAAQ;IACRC,UAAU,EAAVA;EACF,CAAC,CAAC;EACF1B,eAAe,CAAC,YAAM;IACpByC,GAAG,CAACK,OAAO,CAACvB,SAAS,GAAGA,SAAS;IACjCkB,GAAG,CAACK,OAAO,CAACtB,SAAS,GAAGA,SAAS;IACjCiB,GAAG,CAACK,OAAO,CAACrB,QAAQ,GAAGA,QAAQ;IAC/BgB,GAAG,CAACK,OAAO,CAACpB,UAAU,GAAGA,UAAU;EACrC,CAAC,EAAE,CAACH,SAAS,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,CAAC,CAAC;EAChD1B,eAAe,CAAC;IAAA,OAAM4C,GAAG,CAACJ,SAAS,CAACC,GAAG,CAAC;EAAA,GAAE,CAACG,GAAG,CAAC,CAAC;AAClD;AAEA,SAASxC,kBAAkB,EAAEmE,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}