{"ast":null,"code":"import _classCallCheck from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Loader, FileLoader } from \"three\";\nimport { parse as _parse } from \"opentype.js\";\nvar TTFLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(TTFLoader, _Loader);\n  var _super = _createSuper(TTFLoader);\n  function TTFLoader(manager) {\n    var _this;\n    _classCallCheck(this, TTFLoader);\n    _this = _super.call(this, manager);\n    _this.reversed = false;\n    return _this;\n  }\n  _createClass(TTFLoader, [{\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      var scope = this;\n      var loader = new FileLoader(this.manager);\n      loader.setPath(this.path);\n      loader.setResponseType(\"arraybuffer\");\n      loader.setRequestHeader(this.requestHeader);\n      loader.setWithCredentials(this.withCredentials);\n      loader.load(url, function (buffer) {\n        try {\n          onLoad(_parse(buffer));\n        } catch (e) {\n          if (onError) {\n            onError(e);\n          } else {\n            console.error(e);\n          }\n          scope.manager.itemError(url);\n        }\n      }, onProgress, onError);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(arraybuffer) {\n      function convert(font, reversed) {\n        var round = Math.round;\n        var glyphs = {};\n        var scale = 1e5 / ((font.unitsPerEm || 2048) * 72);\n        var glyphIndexMap = font.encoding.cmap.glyphIndexMap;\n        var unicodes = Object.keys(glyphIndexMap);\n        var _loop = function _loop() {\n          var unicode = unicodes[i];\n          var glyph = font.glyphs.glyphs[glyphIndexMap[unicode]];\n          if (unicode !== void 0) {\n            var token = {\n              ha: round(glyph.advanceWidth * scale),\n              x_min: round(glyph.xMin * scale),\n              x_max: round(glyph.xMax * scale),\n              o: \"\"\n            };\n            if (reversed) {\n              glyph.path.commands = reverseCommands(glyph.path.commands);\n            }\n            glyph.path.commands.forEach(function (command) {\n              if (command.type.toLowerCase() === \"c\") {\n                command.type = \"b\";\n              }\n              token.o += command.type.toLowerCase() + \" \";\n              if (command.x !== void 0 && command.y !== void 0) {\n                token.o += round(command.x * scale) + \" \" + round(command.y * scale) + \" \";\n              }\n              if (command.x1 !== void 0 && command.y1 !== void 0) {\n                token.o += round(command.x1 * scale) + \" \" + round(command.y1 * scale) + \" \";\n              }\n              if (command.x2 !== void 0 && command.y2 !== void 0) {\n                token.o += round(command.x2 * scale) + \" \" + round(command.y2 * scale) + \" \";\n              }\n            });\n            glyphs[String.fromCodePoint(glyph.unicode)] = token;\n          }\n        };\n        for (var i = 0; i < unicodes.length; i++) {\n          _loop();\n        }\n        return {\n          glyphs: glyphs,\n          familyName: font.getEnglishName(\"fullName\"),\n          ascender: round(font.ascender * scale),\n          descender: round(font.descender * scale),\n          underlinePosition: font.tables.post.underlinePosition,\n          underlineThickness: font.tables.post.underlineThickness,\n          boundingBox: {\n            xMin: font.tables.head.xMin,\n            xMax: font.tables.head.xMax,\n            yMin: font.tables.head.yMin,\n            yMax: font.tables.head.yMax\n          },\n          resolution: 1e3,\n          original_font_information: font.tables.name\n        };\n      }\n      function reverseCommands(commands) {\n        var paths = [];\n        var path;\n        commands.forEach(function (c) {\n          if (c.type.toLowerCase() === \"m\") {\n            path = [c];\n            paths.push(path);\n          } else if (c.type.toLowerCase() !== \"z\") {\n            path.push(c);\n          }\n        });\n        var reversed = [];\n        paths.forEach(function (p) {\n          var result = {\n            type: \"m\",\n            x: p[p.length - 1].x,\n            y: p[p.length - 1].y\n          };\n          reversed.push(result);\n          for (var i = p.length - 1; i > 0; i--) {\n            var command = p[i];\n            var result2 = {\n              type: command.type\n            };\n            if (command.x2 !== void 0 && command.y2 !== void 0) {\n              result2.x1 = command.x2;\n              result2.y1 = command.y2;\n              result2.x2 = command.x1;\n              result2.y2 = command.y1;\n            } else if (command.x1 !== void 0 && command.y1 !== void 0) {\n              result2.x1 = command.x1;\n              result2.y1 = command.y1;\n            }\n            result2.x = p[i - 1].x;\n            result2.y = p[i - 1].y;\n            reversed.push(result2);\n          }\n        });\n        return reversed;\n      }\n      return convert(_parse(arraybuffer), this.reversed);\n    }\n  }]);\n  return TTFLoader;\n}(Loader);\nexport { TTFLoader };","map":{"version":3,"names":["Loader","FileLoader","parse","TTFLoader","_Loader","_inherits","_super","_createSuper","manager","_this","_classCallCheck","call","reversed","_createClass","key","value","load","url","onLoad","onProgress","onError","scope","loader","setPath","path","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","buffer","e","console","error","itemError","arraybuffer","convert","font","round","Math","glyphs","scale","unitsPerEm","glyphIndexMap","encoding","cmap","unicodes","Object","keys","_loop","unicode","i","glyph","token","ha","advanceWidth","x_min","xMin","x_max","xMax","o","commands","reverseCommands","forEach","command","type","toLowerCase","x","y","x1","y1","x2","y2","String","fromCodePoint","length","familyName","getEnglishName","ascender","descender","underlinePosition","tables","post","underlineThickness","boundingBox","head","yMin","yMax","resolution","original_font_information","name","paths","c","push","p","result","result2"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/three-stdlib@2.23.7_three@0.151.3/node_modules/three-stdlib/loaders/TTFLoader.js"],"sourcesContent":["import { Loader, FileLoader } from \"three\";\nimport { parse } from \"opentype.js\";\nclass TTFLoader extends Loader {\n  constructor(manager) {\n    super(manager);\n    this.reversed = false;\n  }\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setResponseType(\"arraybuffer\");\n    loader.setRequestHeader(this.requestHeader);\n    loader.setWithCredentials(this.withCredentials);\n    loader.load(\n      url,\n      function(buffer) {\n        try {\n          onLoad(parse(buffer));\n        } catch (e) {\n          if (onError) {\n            onError(e);\n          } else {\n            console.error(e);\n          }\n          scope.manager.itemError(url);\n        }\n      },\n      onProgress,\n      onError\n    );\n  }\n  parse(arraybuffer) {\n    function convert(font, reversed) {\n      const round = Math.round;\n      const glyphs = {};\n      const scale = 1e5 / ((font.unitsPerEm || 2048) * 72);\n      const glyphIndexMap = font.encoding.cmap.glyphIndexMap;\n      const unicodes = Object.keys(glyphIndexMap);\n      for (let i = 0; i < unicodes.length; i++) {\n        const unicode = unicodes[i];\n        const glyph = font.glyphs.glyphs[glyphIndexMap[unicode]];\n        if (unicode !== void 0) {\n          const token = {\n            ha: round(glyph.advanceWidth * scale),\n            x_min: round(glyph.xMin * scale),\n            x_max: round(glyph.xMax * scale),\n            o: \"\"\n          };\n          if (reversed) {\n            glyph.path.commands = reverseCommands(glyph.path.commands);\n          }\n          glyph.path.commands.forEach(function(command) {\n            if (command.type.toLowerCase() === \"c\") {\n              command.type = \"b\";\n            }\n            token.o += command.type.toLowerCase() + \" \";\n            if (command.x !== void 0 && command.y !== void 0) {\n              token.o += round(command.x * scale) + \" \" + round(command.y * scale) + \" \";\n            }\n            if (command.x1 !== void 0 && command.y1 !== void 0) {\n              token.o += round(command.x1 * scale) + \" \" + round(command.y1 * scale) + \" \";\n            }\n            if (command.x2 !== void 0 && command.y2 !== void 0) {\n              token.o += round(command.x2 * scale) + \" \" + round(command.y2 * scale) + \" \";\n            }\n          });\n          glyphs[String.fromCodePoint(glyph.unicode)] = token;\n        }\n      }\n      return {\n        glyphs,\n        familyName: font.getEnglishName(\"fullName\"),\n        ascender: round(font.ascender * scale),\n        descender: round(font.descender * scale),\n        underlinePosition: font.tables.post.underlinePosition,\n        underlineThickness: font.tables.post.underlineThickness,\n        boundingBox: {\n          xMin: font.tables.head.xMin,\n          xMax: font.tables.head.xMax,\n          yMin: font.tables.head.yMin,\n          yMax: font.tables.head.yMax\n        },\n        resolution: 1e3,\n        original_font_information: font.tables.name\n      };\n    }\n    function reverseCommands(commands) {\n      const paths = [];\n      let path;\n      commands.forEach(function(c) {\n        if (c.type.toLowerCase() === \"m\") {\n          path = [c];\n          paths.push(path);\n        } else if (c.type.toLowerCase() !== \"z\") {\n          path.push(c);\n        }\n      });\n      const reversed = [];\n      paths.forEach(function(p) {\n        const result = {\n          type: \"m\",\n          x: p[p.length - 1].x,\n          y: p[p.length - 1].y\n        };\n        reversed.push(result);\n        for (let i = p.length - 1; i > 0; i--) {\n          const command = p[i];\n          const result2 = { type: command.type };\n          if (command.x2 !== void 0 && command.y2 !== void 0) {\n            result2.x1 = command.x2;\n            result2.y1 = command.y2;\n            result2.x2 = command.x1;\n            result2.y2 = command.y1;\n          } else if (command.x1 !== void 0 && command.y1 !== void 0) {\n            result2.x1 = command.x1;\n            result2.y1 = command.y1;\n          }\n          result2.x = p[i - 1].x;\n          result2.y = p[i - 1].y;\n          reversed.push(result2);\n        }\n      });\n      return reversed;\n    }\n    return convert(parse(arraybuffer), this.reversed);\n  }\n}\nexport {\n  TTFLoader\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}