{"ast":null,"code":"import _regeneratorRuntime from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _wrapRegExp from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/wrapRegExp.js\";\nvar baseId = Date.now().toString().slice(5);\nvar lastId = 0;\nvar k = 1024;\nvar nano = BigInt(1e3);\nvar milli = BigInt(1e6);\nvar second = BigInt(1e9);\nexport var isServer = typeof window === 'undefined';\nexport function sprintf(template) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  return template.replace( /*#__PURE__*/_wrapRegExp(/%(?:(\\d+)\\$)?(\\x2D?\\d*\\.?\\d*)([dfs])/g, {\n    position: 1,\n    width: 2,\n    type: 3\n  }), function () {\n    var _ref;\n    var groups = (_ref = arguments.length - 1, _ref < 0 || arguments.length <= _ref ? undefined : arguments[_ref]);\n    var rawWidth = groups.width,\n      type = groups.type,\n      position = groups.position;\n    var replacement = position ? args[Number.parseInt(position) - 1] : args.shift();\n    var width = rawWidth === '' ? 0 : Number.parseInt(rawWidth);\n    switch (type) {\n      case 'd':\n        return replacement.toString().padStart(width, '0');\n      case 'f':\n        {\n          var value = replacement;\n          var _rawWidth$split$map = rawWidth.split('.').map(function (w) {\n              return Number.parseFloat(w);\n            }),\n            _rawWidth$split$map2 = _slicedToArray(_rawWidth$split$map, 2),\n            padding = _rawWidth$split$map2[0],\n            precision = _rawWidth$split$map2[1];\n          if (typeof precision === 'number' && precision >= 0) {\n            value = value.toFixed(precision);\n          }\n          return typeof padding === 'number' && padding >= 0 ? value.toString().padStart(width, '0') : value.toString();\n        }\n      case 's':\n        return width < 0 ? replacement.toString().padEnd(-width, ' ') : replacement.toString().padStart(width, ' ');\n      default:\n        return replacement;\n    }\n  });\n}\nexport function formatBytes(_x) {\n  return _formatBytes.apply(this, arguments);\n}\nfunction _formatBytes() {\n  _formatBytes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(bytes) {\n    var decimals,\n      dm,\n      sizes,\n      i,\n      _args = arguments;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          decimals = _args.length > 1 && _args[1] !== undefined ? _args[1] : 2;\n          if (!(bytes === 0)) {\n            _context.next = 3;\n            break;\n          }\n          return _context.abrupt(\"return\", '0 Bytes');\n        case 3:\n          dm = decimals < 0 ? 0 : decimals;\n          sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n          i = Math.floor(Math.log(bytes) / Math.log(k));\n          return _context.abrupt(\"return\", \"\".concat(parseFloat((bytes / Math.pow(k, i)).toFixed(dm)), \" \").concat(sizes[i]));\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _formatBytes.apply(this, arguments);\n}\nexport function formatNanoseconds(_x2) {\n  return _formatNanoseconds.apply(this, arguments);\n}\nfunction _formatNanoseconds() {\n  _formatNanoseconds = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(value) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (typeof value === 'number') {\n            value = BigInt(value);\n          }\n          if (!(value < nano)) {\n            _context2.next = 5;\n            break;\n          }\n          return _context2.abrupt(\"return\", \"\".concat(value, \"ns\"));\n        case 5:\n          if (!(value < milli)) {\n            _context2.next = 9;\n            break;\n          }\n          return _context2.abrupt(\"return\", \"\".concat(value / nano, \"\\u03BCs\"));\n        case 9:\n          if (!(value < second)) {\n            _context2.next = 11;\n            break;\n          }\n          return _context2.abrupt(\"return\", \"\".concat(value / milli, \"ms\"));\n        case 11:\n          return _context2.abrupt(\"return\", \"\".concat(value / second, \"s\"));\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _formatNanoseconds.apply(this, arguments);\n}\nexport function getNanosecondsTime() {\n  return _getNanosecondsTime.apply(this, arguments);\n}\nfunction _getNanosecondsTime() {\n  _getNanosecondsTime = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          if (!(typeof process !== 'undefined' && process.hrtime !== undefined)) {\n            _context3.next = 2;\n            break;\n          }\n          return _context3.abrupt(\"return\", process.hrtime.bigint());\n        case 2:\n          if (!(typeof performance !== 'undefined')) {\n            _context3.next = 4;\n            break;\n          }\n          return _context3.abrupt(\"return\", BigInt(Math.floor(performance.now() * 1e6)));\n        case 4:\n          return _context3.abrupt(\"return\", BigInt(0));\n        case 5:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _getNanosecondsTime.apply(this, arguments);\n}\nexport function uniqueId() {\n  return _uniqueId.apply(this, arguments);\n}\n// This is only used internally, keep in sync with the previous one\nfunction _uniqueId() {\n  _uniqueId = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          return _context4.abrupt(\"return\", \"\".concat(baseId, \"-\").concat(lastId++));\n        case 1:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return _uniqueId.apply(this, arguments);\n}\nexport function syncUniqueId() {\n  return \"\".concat(baseId, \"-\").concat(lastId++);\n}\nexport function getOwnProperty(object, property) {\n  // Checks if `hasOwn` method is defined avoiding errors with older Node.js versions\n  if (Object.hasOwn === undefined) {\n    return Object.prototype.hasOwnProperty.call(object, property) ? object[property] : undefined;\n  }\n  return Object.hasOwn(object, property) ? object[property] : undefined;\n}\nexport function getTokenFrequency(token, tokens) {\n  var count = 0;\n  var _iterator = _createForOfIteratorHelper(tokens),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var t = _step.value;\n      if (t === token) {\n        count++;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return count;\n}\nexport function insertSortedValue(arr, el) {\n  var compareFn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : sortTokenScorePredicate;\n  var low = 0;\n  var high = arr.length;\n  var mid;\n  while (low < high) {\n    mid = low + high >>> 1;\n    if (compareFn(el, arr[mid]) < 0) {\n      high = mid;\n    } else {\n      low = mid + 1;\n    }\n  }\n  arr.splice(low, 0, el);\n  return arr;\n}\nexport function sortTokenScorePredicate(a, b) {\n  if (b[1] === a[1]) {\n    return a[0].localeCompare(b[0]);\n  }\n  return b[1] - a[1];\n}\n// Intersection function taken from https://github.com/lovasoa/fast_array_intersect.\n// MIT Licensed at the time of writing.\nexport function intersect(arrays) {\n  if (arrays.length === 0) {\n    return [];\n  } else if (arrays.length === 1) {\n    return arrays[0];\n  }\n  for (var i = 1; i < arrays.length; i++) {\n    if (arrays[i].length < arrays[0].length) {\n      var tmp = arrays[0];\n      arrays[0] = arrays[i];\n      arrays[i] = tmp;\n    }\n  }\n  var set = new Map();\n  var _iterator2 = _createForOfIteratorHelper(arrays[0]),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _elem = _step2.value;\n      set.set(_elem, 1);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  for (var _i = 1; _i < arrays.length; _i++) {\n    var found = 0;\n    var _iterator3 = _createForOfIteratorHelper(arrays[_i]),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var elem = _step3.value;\n        var count = set.get(elem);\n        if (count === _i) {\n          set.set(elem, count + 1);\n          found++;\n        }\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n    if (found === 0) return [];\n  }\n  return arrays[0].filter(function (e) {\n    var count = set.get(e);\n    if (count !== undefined) set.set(e, 0);\n    return count === arrays.length;\n  });\n}\nexport function getDocumentProperties(_x3, _x4) {\n  return _getDocumentProperties.apply(this, arguments);\n}\nfunction _getDocumentProperties() {\n  _getDocumentProperties = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(doc, paths) {\n    var properties, pathsLength, i, path, pathTokens, current, pathTokensLength, j;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          properties = {};\n          pathsLength = paths.length;\n          i = 0;\n        case 3:\n          if (!(i < pathsLength)) {\n            _context5.next = 26;\n            break;\n          }\n          path = paths[i];\n          pathTokens = path.split('.');\n          current = doc;\n          pathTokensLength = pathTokens.length;\n          j = 0;\n        case 9:\n          if (!(j < pathTokensLength)) {\n            _context5.next = 22;\n            break;\n          }\n          current = current[pathTokens[j]];\n          // We found an object but we were supposed to be done\n          if (!(typeof current === 'object' && !Array.isArray(current) && current !== null && j === pathTokensLength - 1)) {\n            _context5.next = 16;\n            break;\n          }\n          current = undefined;\n          return _context5.abrupt(\"break\", 22);\n        case 16:\n          if (!((current === null || typeof current !== 'object') && j < pathTokensLength - 1)) {\n            _context5.next = 19;\n            break;\n          }\n          // We can't recurse anymore but we were supposed to\n          current = undefined;\n          return _context5.abrupt(\"break\", 22);\n        case 19:\n          j++;\n          _context5.next = 9;\n          break;\n        case 22:\n          if (typeof current !== 'undefined') {\n            properties[path] = current;\n          }\n        case 23:\n          i++;\n          _context5.next = 3;\n          break;\n        case 26:\n          return _context5.abrupt(\"return\", properties);\n        case 27:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return _getDocumentProperties.apply(this, arguments);\n}\nexport function getNested(_x5, _x6) {\n  return _getNested.apply(this, arguments);\n}\nfunction _getNested() {\n  _getNested = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(obj, path) {\n    var props;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return getDocumentProperties(obj, [path]);\n        case 2:\n          props = _context6.sent;\n          return _context6.abrupt(\"return\", props[path]);\n        case 4:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return _getNested.apply(this, arguments);\n}\nexport function flattenObject(obj) {\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var result = {};\n  for (var key in obj) {\n    var prop = \"\".concat(prefix).concat(key);\n    var objKey = obj[key];\n    if (typeof objKey === 'object' && objKey !== null) {\n      Object.assign(result, flattenObject(objKey, \"\".concat(prop, \".\")));\n    } else {\n      result[prop] = objKey;\n    }\n  }\n  return result;\n}","map":{"version":3,"names":["baseId","Date","now","toString","slice","lastId","k","nano","BigInt","milli","second","isServer","window","sprintf","template","_len","arguments","length","args","Array","_key","replace","_wrapRegExp","position","width","type","_ref","groups","undefined","rawWidth","replacement","Number","parseInt","shift","padStart","value","_rawWidth$split$map","split","map","w","parseFloat","_rawWidth$split$map2","_slicedToArray","padding","precision","toFixed","padEnd","formatBytes","_x","_formatBytes","apply","_asyncToGenerator","_regeneratorRuntime","mark","_callee","bytes","decimals","dm","sizes","i","_args","wrap","_callee$","_context","prev","next","abrupt","Math","floor","log","concat","pow","stop","formatNanoseconds","_x2","_formatNanoseconds","_callee2","_callee2$","_context2","getNanosecondsTime","_getNanosecondsTime","_callee3","_callee3$","_context3","process","hrtime","bigint","performance","uniqueId","_uniqueId","_callee4","_callee4$","_context4","syncUniqueId","getOwnProperty","object","property","Object","hasOwn","prototype","hasOwnProperty","call","getTokenFrequency","token","tokens","count","_iterator","_createForOfIteratorHelper","_step","s","n","done","t","err","e","f","insertSortedValue","arr","el","compareFn","sortTokenScorePredicate","low","high","mid","splice","a","b","localeCompare","intersect","arrays","tmp","set","Map","_iterator2","_step2","elem","found","_iterator3","_step3","get","filter","getDocumentProperties","_x3","_x4","_getDocumentProperties","_callee5","doc","paths","properties","pathsLength","path","pathTokens","current","pathTokensLength","j","_callee5$","_context5","isArray","getNested","_x5","_x6","_getNested","_callee6","obj","props","_callee6$","_context6","sent","flattenObject","prefix","result","key","prop","objKey","assign"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@orama+orama@1.0.3/node_modules/@orama/orama/src/utils.ts"],"sourcesContent":["import type { Document, SearchableValue, TokenScore } from './types.js'\n\nconst baseId = Date.now().toString().slice(5)\nlet lastId = 0\n\nconst k = 1024\nconst nano = BigInt(1e3)\nconst milli = BigInt(1e6)\nconst second = BigInt(1e9)\n\nexport const isServer = typeof window === 'undefined'\n\nexport function sprintf(template: string, ...args: (string | number)[]): string {\n  return template.replace(\n    /%(?:(?<position>\\d+)\\$)?(?<width>-?\\d*\\.?\\d*)(?<type>[dfs])/g,\n    function (...replaceArgs: Array<string | number | Record<string, string>>): string {\n      const groups = replaceArgs[replaceArgs.length - 1] as Record<string, string>\n      const { width: rawWidth, type, position } = groups\n\n      const replacement = position ? args[Number.parseInt(position) - 1]! : args.shift()!\n      const width = rawWidth === '' ? 0 : Number.parseInt(rawWidth)\n\n      switch (type) {\n        case 'd':\n          return replacement.toString().padStart(width, '0')\n        case 'f': {\n          let value = replacement\n          const [padding, precision] = rawWidth.split('.').map(w => Number.parseFloat(w))\n\n          if (typeof precision === 'number' && precision >= 0) {\n            value = (value as number).toFixed(precision)\n          }\n\n          return typeof padding === 'number' && padding >= 0 ? value.toString().padStart(width, '0') : value.toString()\n        }\n        case 's':\n          return width < 0\n            ? (replacement as string).toString().padEnd(-width, ' ')\n            : (replacement as string).toString().padStart(width, ' ')\n\n        default:\n          return replacement as string\n      }\n    },\n  )\n}\n\nexport async function formatBytes(bytes: number, decimals = 2): Promise<string> {\n  if (bytes === 0) {\n    return '0 Bytes'\n  }\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`\n}\n\nexport async function formatNanoseconds(value: number | bigint): Promise<string> {\n  if (typeof value === 'number') {\n    value = BigInt(value)\n  }\n\n  if (value < nano) {\n    return `${value}ns`\n  } else if (value < milli) {\n    return `${value / nano}μs`\n  } else if (value < second) {\n    return `${value / milli}ms`\n  }\n\n  return `${value / second}s`\n}\n\nexport async function getNanosecondsTime(): Promise<bigint> {\n  if (typeof process !== 'undefined' && process.hrtime !== undefined) {\n    return process.hrtime.bigint()\n  }\n\n  if (typeof performance !== 'undefined') {\n    return BigInt(Math.floor(performance.now() * 1e6))\n  }\n\n  // @todo: fallback to V8 native method to get microtime\n  return BigInt(0)\n}\n\nexport async function uniqueId(): Promise<string> {\n  return `${baseId}-${lastId++}`\n}\n\n// This is only used internally, keep in sync with the previous one\nexport function syncUniqueId(): string {\n  return `${baseId}-${lastId++}`\n}\n\nexport function getOwnProperty<T = unknown>(object: Record<string, T>, property: string): T | undefined {\n  // Checks if `hasOwn` method is defined avoiding errors with older Node.js versions\n  if (Object.hasOwn === undefined) {\n    return Object.prototype.hasOwnProperty.call(object, property) ? object[property] : undefined\n  }\n\n  return Object.hasOwn(object, property) ? object[property] : undefined\n}\n\nexport function getTokenFrequency(token: string, tokens: string[]): number {\n  let count = 0\n\n  for (const t of tokens) {\n    if (t === token) {\n      count++\n    }\n  }\n\n  return count\n}\n\nexport function insertSortedValue(\n  arr: TokenScore[],\n  el: TokenScore,\n  compareFn = sortTokenScorePredicate,\n): TokenScore[] {\n  let low = 0\n  let high = arr.length\n  let mid\n\n  while (low < high) {\n    mid = (low + high) >>> 1\n    if (compareFn(el, arr[mid]) < 0) {\n      high = mid\n    } else {\n      low = mid + 1\n    }\n  }\n\n  arr.splice(low, 0, el)\n\n  return arr\n}\n\nexport function sortTokenScorePredicate(a: TokenScore, b: TokenScore): number {\n  if (b[1] === a[1]) {\n    return a[0].localeCompare(b[0])\n  }\n\n  return b[1] - a[1]\n}\n\n// Intersection function taken from https://github.com/lovasoa/fast_array_intersect.\n// MIT Licensed at the time of writing.\nexport function intersect<T>(arrays: ReadonlyArray<T>[]): T[] {\n  if (arrays.length === 0) {\n    return []\n  } else if (arrays.length === 1) {\n    return arrays[0] as T[]\n  }\n\n  for (let i = 1; i < arrays.length; i++) {\n    if (arrays[i].length < arrays[0].length) {\n      const tmp = arrays[0]\n      arrays[0] = arrays[i]\n      arrays[i] = tmp\n    }\n  }\n\n  const set = new Map()\n  for (const elem of arrays[0]) {\n    set.set(elem, 1)\n  }\n  for (let i = 1; i < arrays.length; i++) {\n    let found = 0\n    for (const elem of arrays[i]) {\n      const count = set.get(elem)\n      if (count === i) {\n        set.set(elem, count + 1)\n        found++\n      }\n    }\n    if (found === 0) return []\n  }\n\n  return arrays[0].filter(e => {\n    const count = set.get(e)\n    if (count !== undefined) set.set(e, 0)\n    return count === arrays.length\n  })\n}\n\nexport async function getDocumentProperties(doc: Document, paths: string[]): Promise<Record<string, SearchableValue>> {\n  const properties: Record<string, SearchableValue> = {}\n\n  const pathsLength = paths.length\n  for (let i = 0; i < pathsLength; i++) {\n    const path = paths[i]\n    const pathTokens = path.split('.')\n\n    let current: SearchableValue | Document | undefined = doc\n    const pathTokensLength = pathTokens.length\n    for (let j = 0; j < pathTokensLength; j++) {\n      current = (current as Document)[pathTokens[j]!] as Document | SearchableValue\n\n      // We found an object but we were supposed to be done\n      if (typeof current === 'object' && !Array.isArray(current) && current !== null && j === pathTokensLength - 1) {\n        current = undefined\n        break\n      } else if ((current === null || typeof current !== 'object') && j < pathTokensLength - 1) {\n        // We can't recurse anymore but we were supposed to\n        current = undefined\n        break\n      }\n    }\n\n    if (typeof current !== 'undefined') {\n      properties[path] = current as SearchableValue\n    }\n  }\n\n  return properties\n}\n\nexport async function getNested<T = SearchableValue>(obj: object, path: string): Promise<T | undefined> {\n  const props = await getDocumentProperties(obj as Document, [path])\n\n  return props[path] as T | undefined\n}\n\nexport function flattenObject(obj: object, prefix = ''): Document {\n  const result: Document = {}\n\n  for (const key in obj) {\n    const prop = `${prefix}${key}`\n    const objKey = (obj as Document)[key]\n\n    if (typeof objKey === 'object' && objKey !== null) {\n      Object.assign(result, flattenObject(objKey, `${prop}.`))\n    } else {\n      result[prop] = objKey\n    }\n  }\n  return result\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}