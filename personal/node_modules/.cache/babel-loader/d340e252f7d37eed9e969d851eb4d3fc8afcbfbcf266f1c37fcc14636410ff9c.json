{"ast":null,"code":"import _toConsumableArray from \"/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@babel+runtime@7.22.3/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport * as React from 'react';\nimport { useThree } from '@react-three/fiber';\nfunction CycleRaycast(_ref) {\n  var onChanged = _ref.onChanged,\n    portal = _ref.portal,\n    _ref$preventDefault = _ref.preventDefault,\n    preventDefault = _ref$preventDefault === void 0 ? true : _ref$preventDefault,\n    _ref$scroll = _ref.scroll,\n    scroll = _ref$scroll === void 0 ? true : _ref$scroll,\n    _ref$keyCode = _ref.keyCode,\n    keyCode = _ref$keyCode === void 0 ? 9 : _ref$keyCode;\n  var cycle = React.useRef(0);\n  var setEvents = useThree(function (state) {\n    return state.setEvents;\n  });\n  var get = useThree(function (state) {\n    return state.get;\n  });\n  var gl = useThree(function (state) {\n    return state.gl;\n  });\n  React.useEffect(function () {\n    var _portal$current;\n    var hits = [];\n    var lastEvent = undefined;\n    var prev = get().events.filter;\n    var target = (_portal$current = portal == null ? void 0 : portal.current) !== null && _portal$current !== void 0 ? _portal$current : gl.domElement.parentNode; // Render custom status\n\n    var renderStatus = function renderStatus() {\n      return target && onChanged && onChanged(hits, Math.round(cycle.current) % hits.length);\n    }; // Overwrite the raycasters custom filter (this only exists in r3f)\n\n    setEvents({\n      filter: function filter(intersections, state) {\n        // Reset cycle when the intersections change\n        var clone = _toConsumableArray(intersections);\n        if (clone.length !== hits.length || !hits.every(function (hit) {\n          return clone.map(function (e) {\n            return e.object.uuid;\n          }).includes(hit.object.uuid);\n        })) {\n          cycle.current = 0;\n          hits = clone;\n          renderStatus();\n        } // Run custom filter if there is one\n\n        if (prev) clone = prev(clone, state); // Cycle through the actual raycast intersects\n\n        for (var i = 0; i < Math.round(cycle.current) % clone.length; i++) {\n          var first = clone.shift();\n          clone = [].concat(_toConsumableArray(clone), [first]);\n        }\n        return clone;\n      }\n    }); // Cycle, refresh events and render status\n\n    var refresh = function refresh(fn) {\n      var _get$events$handlers, _get$events$handlers2;\n      cycle.current = fn(cycle.current); // Cancel hovered elements and fake a pointer-move\n\n      (_get$events$handlers = get().events.handlers) == null ? void 0 : _get$events$handlers.onPointerCancel(undefined);\n      (_get$events$handlers2 = get().events.handlers) == null ? void 0 : _get$events$handlers2.onPointerMove(lastEvent);\n      renderStatus();\n    }; // Key events\n\n    var tabEvent = function tabEvent(event) {\n      if (event.keyCode || event.which === keyCode) {\n        if (preventDefault) event.preventDefault();\n        if (hits.length > 1) refresh(function (current) {\n          return current + 1;\n        });\n      }\n    }; // Wheel events\n\n    var wheelEvent = function wheelEvent(event) {\n      if (preventDefault) event.preventDefault();\n      var delta = 0;\n      if (!event) event = window.event;\n      if (event.wheelDelta) delta = event.wheelDelta / 120;else if (event.detail) delta = -event.detail / 3;\n      if (hits.length > 1) refresh(function (current) {\n        return Math.abs(current - delta);\n      });\n    }; // Catch last move event and position custom status\n\n    var moveEvent = function moveEvent(event) {\n      return lastEvent = event;\n    };\n    document.addEventListener('pointermove', moveEvent, {\n      passive: true\n    });\n    if (scroll) document.addEventListener('wheel', wheelEvent);\n    if (keyCode !== undefined) document.addEventListener('keydown', tabEvent);\n    return function () {\n      // Clean up\n      setEvents({\n        filter: prev\n      });\n      if (keyCode !== undefined) document.removeEventListener('keydown', tabEvent);\n      if (scroll) document.removeEventListener('wheel', wheelEvent);\n      document.removeEventListener('pointermove', moveEvent);\n    };\n  }, [gl, get, setEvents, preventDefault, scroll, keyCode]);\n  return null;\n}\nexport { CycleRaycast };","map":{"version":3,"names":["React","useThree","CycleRaycast","_ref","onChanged","portal","_ref$preventDefault","preventDefault","_ref$scroll","scroll","_ref$keyCode","keyCode","cycle","useRef","setEvents","state","get","gl","useEffect","_portal$current","hits","lastEvent","undefined","prev","events","filter","target","current","domElement","parentNode","renderStatus","Math","round","length","intersections","clone","_toConsumableArray","every","hit","map","e","object","uuid","includes","i","first","shift","concat","refresh","fn","_get$events$handlers","_get$events$handlers2","handlers","onPointerCancel","onPointerMove","tabEvent","event","which","wheelEvent","delta","window","wheelDelta","detail","abs","moveEvent","document","addEventListener","passive","removeEventListener"],"sources":["/home/krug/Coding/JavaScript/Websites/Personal/personal/node_modules/.pnpm/@react-three+drei@9.72.1_@react-three+fiber@8.13.0_@types+three@0.150.2_react-dom@18.2.0_react@18.2.0_three@0.151.3/node_modules/@react-three/drei/web/CycleRaycast.js"],"sourcesContent":["import * as React from 'react';\nimport { useThree } from '@react-three/fiber';\n\nfunction CycleRaycast({\n  onChanged,\n  portal,\n  preventDefault = true,\n  scroll = true,\n  keyCode = 9\n}) {\n  const cycle = React.useRef(0);\n  const setEvents = useThree(state => state.setEvents);\n  const get = useThree(state => state.get);\n  const gl = useThree(state => state.gl);\n  React.useEffect(() => {\n    var _portal$current;\n\n    let hits = [];\n    let lastEvent = undefined;\n    const prev = get().events.filter;\n    const target = (_portal$current = portal == null ? void 0 : portal.current) !== null && _portal$current !== void 0 ? _portal$current : gl.domElement.parentNode; // Render custom status\n\n    const renderStatus = () => target && onChanged && onChanged(hits, Math.round(cycle.current) % hits.length); // Overwrite the raycasters custom filter (this only exists in r3f)\n\n\n    setEvents({\n      filter: (intersections, state) => {\n        // Reset cycle when the intersections change\n        let clone = [...intersections];\n\n        if (clone.length !== hits.length || !hits.every(hit => clone.map(e => e.object.uuid).includes(hit.object.uuid))) {\n          cycle.current = 0;\n          hits = clone;\n          renderStatus();\n        } // Run custom filter if there is one\n\n\n        if (prev) clone = prev(clone, state); // Cycle through the actual raycast intersects\n\n        for (let i = 0; i < Math.round(cycle.current) % clone.length; i++) {\n          const first = clone.shift();\n          clone = [...clone, first];\n        }\n\n        return clone;\n      }\n    }); // Cycle, refresh events and render status\n\n    const refresh = fn => {\n      var _get$events$handlers, _get$events$handlers2;\n\n      cycle.current = fn(cycle.current); // Cancel hovered elements and fake a pointer-move\n\n      (_get$events$handlers = get().events.handlers) == null ? void 0 : _get$events$handlers.onPointerCancel(undefined);\n      (_get$events$handlers2 = get().events.handlers) == null ? void 0 : _get$events$handlers2.onPointerMove(lastEvent);\n      renderStatus();\n    }; // Key events\n\n\n    const tabEvent = event => {\n      if (event.keyCode || event.which === keyCode) {\n        if (preventDefault) event.preventDefault();\n        if (hits.length > 1) refresh(current => current + 1);\n      }\n    }; // Wheel events\n\n\n    const wheelEvent = event => {\n      if (preventDefault) event.preventDefault();\n      let delta = 0;\n      if (!event) event = window.event;\n      if (event.wheelDelta) delta = event.wheelDelta / 120;else if (event.detail) delta = -event.detail / 3;\n      if (hits.length > 1) refresh(current => Math.abs(current - delta));\n    }; // Catch last move event and position custom status\n\n\n    const moveEvent = event => lastEvent = event;\n\n    document.addEventListener('pointermove', moveEvent, {\n      passive: true\n    });\n    if (scroll) document.addEventListener('wheel', wheelEvent);\n    if (keyCode !== undefined) document.addEventListener('keydown', tabEvent);\n    return () => {\n      // Clean up\n      setEvents({\n        filter: prev\n      });\n      if (keyCode !== undefined) document.removeEventListener('keydown', tabEvent);\n      if (scroll) document.removeEventListener('wheel', wheelEvent);\n      document.removeEventListener('pointermove', moveEvent);\n    };\n  }, [gl, get, setEvents, preventDefault, scroll, keyCode]);\n  return null;\n}\n\nexport { CycleRaycast };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}